<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(performance)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmmTMB)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emmeans)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: permute</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lattice</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lattice' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>This is vegan 2.6-4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FD)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ade4</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ape</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'ape'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    where</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: geometry</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.11.2, GDAL 3.6.2, PROJ 9.2.0; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DHARMa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'DHARMa' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>This is DHARMa 0.4.7. For overview type '?DHARMa'. For recent changes, type news(package = 'DHARMa')</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmm.hp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'glmm.hp' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: MuMIn</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'MuMIn' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Thank you for using this package! If you use this package in your research, please cite the following references </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Jiangshan Lai, Weijie Zhu, Dongfang Cui, Lingfeng Mao(2023). Extension of the glmm.hp package to Zero-Inflated generalized linear mixed models and multiple regression. Journal of Plant Ecology,16(6):rtad038</code></pre>
</div>
</div>
<section id="site-information" class="level2">
<h2 class="anchored" data-anchor-id="site-information">Site information</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/sites.csv"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(sites, <span class="at">coords=</span><span class="fu">c</span>(<span class="st">"Long"</span>,<span class="st">"Lat"</span>), <span class="at">crs=</span><span class="dv">4326</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(sites)</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># st_write(sites, "studysites.shp")</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># #read in bioclim data from other repo</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>env <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(<span class="st">"F:/CH2_ant-plant_mutualism_synthesis/na_rasters.grd"</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">#MAP and MAT from Worldclim </span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>climsites <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">extract</span>(env, sites)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">cbind</span>(climsites, sites)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">select</span>(sites, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">21</span><span class="sc">:</span><span class="dv">25</span>)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co">#clean up NDVI values</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">rename</span>(sites, <span class="at">MAT =</span> wc2<span class="fl">.1</span>_30s_bio_1, <span class="at">MAP =</span> wc2<span class="fl">.1</span>_30s_bio_12)</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">select</span>(sites, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">unique</span>(sites)</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>ndvi <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/NDVI.csv"</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>ndvi<span class="sc">$</span>NDVI20231[<span class="fu">is.na</span>(ndvi<span class="sc">$</span>NDVI20231)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>ndvi<span class="sc">$</span>NDVI20241[<span class="fu">is.na</span>(ndvi<span class="sc">$</span>NDVI20241)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>ndvi <span class="ot">&lt;-</span> <span class="fu">mutate</span>(ndvi, <span class="at">ndvi =</span> NDVI20231 <span class="sc">+</span> NDVI20241)</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>ndvi <span class="ot">&lt;-</span> <span class="fu">select</span>(ndvi, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">8</span>)</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>ndvi <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ndvi, sites, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="annual-abundance-and-richness" class="level2">
<h2 class="anchored" data-anchor-id="annual-abundance-and-richness">Annual abundance and richness</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>plts <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/annuals/allplants_IDed.csv"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>plts <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(plts, <span class="sc">-</span>X)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>plts <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(plts, <span class="sc">-</span><span class="dv">6</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co">#not an annual</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>plts <span class="ot">&lt;-</span> <span class="fu">filter</span>(plts, species <span class="sc">!=</span> <span class="st">"Ambrosia.salsola"</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(plts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   2724 obs. of  7 variables:
 $ Year.NA  : int  2024 2024 2024 2024 2024 2024 2024 2024 2024 2024 ...
 $ Rep.NA   : int  22 4 5 9 11 11 14 16 17 17 ...
 $ Site     : chr  "Tecopa" "HOM" "HOM" "HOM" ...
 $ Date     : chr  "2024-04-16" "2024-04-25" "2024-04-25" "2024-04-25" ...
 $ Microsite: chr  "open" "shrub" "open" "open" ...
 $ species  : chr  "Achyronychia.cooperi" "Acmispon.strigosus" "Acmispon.strigosus" "Acmispon.strigosus" ...
 $ abun     : int  1 1 2 1 1 1 1 1 2 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>plt_wide <span class="ot">&lt;-</span> plts <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> species, <span class="at">values_from =</span> abun)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(plt_wide<span class="sc">$</span>Year.NA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2024 2023</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(plt_wide<span class="sc">$</span>Rep.NA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 22  4  5  9 11 14 16 17 19 20 39 23 24  6 27 26 13 29 25 10 18 28 30  7 21
[26]  2 12 37  1 15  3  8 31 33 35 38 40 32 34 36</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(plt_wide<span class="sc">$</span>Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Tecopa"    "HOM"       "Yucca"     "Cuyama 1"  "Cuyama 2"  "Barstow"  
[7] "Sheephole"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(plt_wide<span class="sc">$</span>Microsite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "open"  "shrub"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>plt_wide<span class="sc">$</span>uniID <span class="ot">&lt;-</span> <span class="fu">paste</span>(plt_wide<span class="sc">$</span>Site, plt_wide<span class="sc">$</span>Year.NA, plt_wide<span class="sc">$</span>Microsite, plt_wide<span class="sc">$</span>Rep.NA)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>plt_wide<span class="sc">$</span>uniID <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, plt_wide<span class="sc">$</span>uniID)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>plt_wide[<span class="fu">is.na</span>(plt_wide)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>env <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(plt_wide, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, uniID)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>comm <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(plt_wide, <span class="dv">6</span><span class="sc">:</span><span class="dv">90</span>)</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>richness <span class="ot">&lt;-</span> <span class="fu">specnumber</span>(comm)</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>abun <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(comm)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>env<span class="sc">$</span>rich <span class="ot">&lt;-</span> richness</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>env<span class="sc">$</span>abun <span class="ot">&lt;-</span> abun</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co">#import plant metadata for zero rows</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>reps <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/reps.csv"</span>)</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>reps <span class="ot">&lt;-</span> <span class="fu">filter</span>(reps, season <span class="sc">==</span> <span class="st">"spring"</span>)</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>reps<span class="sc">$</span>uniID <span class="ot">&lt;-</span> <span class="fu">paste</span>(reps<span class="sc">$</span>Site, reps<span class="sc">$</span>year, reps<span class="sc">$</span>Microsite, reps<span class="sc">$</span>Rep)</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>reps<span class="sc">$</span>uniID <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, reps<span class="sc">$</span>uniID)</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(reps, env, <span class="at">by =</span> <span class="st">"uniID"</span>)</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>plt.ag<span class="sc">$</span>rich[<span class="fu">is.na</span>(plt.ag<span class="sc">$</span>rich)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>plt.ag<span class="sc">$</span>abun[<span class="fu">is.na</span>(plt.ag<span class="sc">$</span>abun)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">rename</span>(plt.ag, <span class="at">Site =</span> Site.x, <span class="at">Year =</span> year)</span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>plt.ag<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(plt.ag<span class="sc">$</span>Year)</span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>ndvi<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(ndvi<span class="sc">$</span>Year)</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, ndvi, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in left_join(plt.ag, ndvi, by = c("Site", "Year")): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 1 of `x` matches multiple rows in `y`.
ℹ Row 1 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>precip <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/winterprecip_compiled.csv"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>precip<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(precip<span class="sc">$</span>Year)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, precip, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span>))</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">filter</span>(plt.ag, Season <span class="sc">==</span> <span class="st">"spring"</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co">#remove doubled rows</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">unique</span>(plt.ag)</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="co">#attach provence for invasive/native info</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>prov <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/plantprov.csv"</span>)</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>plts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plts, prov, <span class="at">by =</span> <span class="st">"species"</span>)</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>prov.ag <span class="ot">&lt;-</span> plts <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Year.NA, Rep.NA, Site, Microsite, prov) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">prov.abun =</span> <span class="fu">sum</span>(abun)) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Year.NA', 'Rep.NA', 'Site', 'Microsite'.
You can override using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(prov.ag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1,528 × 6] (S3: tbl_df/tbl/data.frame)
 $ Year.NA  : int [1:1528] 2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 ...
 $ Rep.NA   : int [1:1528] 1 1 1 1 1 1 1 1 1 1 ...
 $ Site     : chr [1:1528] "Barstow" "Barstow" "Barstow" "Cuyama 1" ...
 $ Microsite: chr [1:1528] "open" "open" "shrub" "open" ...
 $ prov     : chr [1:1528] "invasive" "native" "native" "invasive" ...
 $ prov.abun: int [1:1528] 9 30 4 11 148 0 117 22 2 7 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>prov.ag <span class="ot">&lt;-</span> <span class="fu">filter</span>(prov.ag, prov <span class="sc">!=</span><span class="st">""</span>) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> prov, <span class="at">values_from =</span> prov.abun)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>prov.ag[<span class="fu">is.na</span>(prov.ag )] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">select</span>(plt.ag, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">16</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>prov.ag<span class="sc">$</span>Year.NA <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(prov.ag<span class="sc">$</span>Year.NA)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, prov.ag, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"Year.NA"</span>, <span class="st">"Site"</span>, <span class="st">"Microsite.x"</span> <span class="ot">=</span> <span class="st">"Microsite"</span>, <span class="st">"Rep"</span> <span class="ot">=</span> <span class="st">"Rep.NA"</span>))</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>plt.ag<span class="sc">$</span>invasive[<span class="fu">is.na</span>(plt.ag<span class="sc">$</span>invasive)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>plt.ag<span class="sc">$</span>native[<span class="fu">is.na</span>(plt.ag<span class="sc">$</span>native)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="co">#mean plants</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>mn.plt <span class="ot">&lt;-</span> plt.ag <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Site, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">mean.abun =</span> <span class="fu">mean</span>(abun), <span class="at">mean.rich =</span> <span class="fu">mean</span>(rich), <span class="at">mean.inv =</span> <span class="fu">mean</span>(invasive), <span class="at">mean.native =</span> <span class="fu">mean</span>(native))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Site'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<p>##CWM Seeds</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#read in plant traits</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>ptraits <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"clean data/annuallist.csv"</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>ptraits <span class="ot">&lt;-</span> <span class="fu">filter</span>(ptraits, species <span class="sc">!=</span> <span class="st">"Ambrosia.salsola"</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>ptraits <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(ptraits, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co"># determine trait coverage by abundance</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>byspecies <span class="ot">&lt;-</span> plt_wide[<span class="dv">6</span><span class="sc">:</span><span class="dv">90</span>] <span class="sc">%&gt;%</span> <span class="fu">colSums</span>()</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>byspecies <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(byspecies)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>byspecies<span class="sc">$</span>species <span class="ot">&lt;-</span> <span class="fu">row.names</span>(byspecies)</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(byspecies<span class="sc">$</span>byspecies)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50150</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>tr <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ptraits, byspecies, <span class="at">by =</span> <span class="st">"species"</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(tr<span class="sc">$</span>byspecies, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50147</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>tr_filter <span class="ot">&lt;-</span> <span class="fu">filter</span>(tr, seed.weight <span class="sc">&gt;=</span> <span class="dv">0</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(tr_filter<span class="sc">$</span>byspecies, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 49473</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#microsite level CWM</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FD)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>comm <span class="ot">&lt;-</span> plt_wide[<span class="dv">6</span><span class="sc">:</span><span class="dv">91</span>]</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>comm <span class="ot">&lt;-</span> <span class="fu">rename</span>(comm, <span class="at">Ditaxis.lanceolata =</span> Ditaxis.serrata)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(comm) <span class="ot">&lt;-</span> comm<span class="sc">$</span>uniID</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#comm &lt;- dplyr::select(comm, -uniID)</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>comm <span class="ot">&lt;-</span> comm<span class="sc">%&gt;%</span><span class="fu">filter</span>(<span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))<span class="sc">!=</span><span class="dv">0</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(ptraits) <span class="ot">&lt;-</span> ptraits<span class="sc">$</span>species</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>ptraits <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(ptraits, seed.weight)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>ptraits <span class="ot">&lt;-</span> <span class="fu">filter</span>(ptraits, seed.weight <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">names</span>(comm)[(<span class="fu">names</span>(comm) <span class="sc">%in%</span> <span class="fu">row.names</span>(ptraits))]</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co">#add the uniID to the name vector</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">append</span>(names.use, <span class="st">"uniID"</span>)</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> comm[, names.use]</span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> df.subset<span class="sc">%&gt;%</span><span class="fu">filter</span>(<span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))<span class="sc">!=</span><span class="dv">0</span>)</span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>sampleIDs <span class="ot">&lt;-</span> df.subset<span class="sc">$</span>uniID</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(df.subset, <span class="sc">-</span>uniID)</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>func.seeds <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(ptraits, df.subset, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: Only one continuous trait or dimension in 'x'. FRic was measured as the range, NOT as the convex hull volume. 
FDiv: Cannot not be computed when 'x' contains one single continuous trait or dimension. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>df.subset<span class="sc">$</span>cwm.seedweight <span class="ot">&lt;-</span> func.seeds<span class="sc">$</span>CWM</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>df.subset<span class="sc">$</span>uniID <span class="ot">&lt;-</span> sampleIDs</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>cwm <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df.subset<span class="sc">$</span>uniID, df.subset<span class="sc">$</span>cwm.seedweight)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>cwm <span class="ot">&lt;-</span> <span class="fu">rename</span>(cwm, <span class="at">uniID =</span> <span class="st">'df.subset$uniID'</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co">#join to larger dataframe</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>env <span class="ot">&lt;-</span> <span class="fu">left_join</span>(env, cwm, <span class="at">by =</span> <span class="st">"uniID"</span>)</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="co">#microsite level by provence</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co">#make a vector of each set of species by provence</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>prov <span class="ot">&lt;-</span> <span class="fu">filter</span>(prov, species <span class="sc">!=</span> <span class="st">"Ambrosia.salsola"</span>)</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>inv <span class="ot">&lt;-</span> <span class="fu">filter</span>(prov, prov <span class="sc">==</span> <span class="st">"invasive"</span>)</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>nat <span class="ot">&lt;-</span> <span class="fu">filter</span>(prov, prov <span class="sc">==</span> <span class="st">"native"</span>)</span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>invnames <span class="ot">&lt;-</span> inv<span class="sc">$</span>species</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>ptraits.inv <span class="ot">&lt;-</span> <span class="fu">filter</span>(ptraits, <span class="fu">row.names</span>(ptraits) <span class="sc">%in%</span> invnames)</span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>invnames <span class="ot">&lt;-</span> <span class="fu">append</span>(invnames, <span class="st">"uniID"</span>)</span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> comm[, names.use]</span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>df.subset.inv <span class="ot">&lt;-</span> df.subset</span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>df.inv <span class="ot">&lt;-</span> df.subset.inv[, invnames]</span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>df.inv <span class="ot">&lt;-</span> df.inv<span class="sc">%&gt;%</span><span class="fu">filter</span>(<span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))<span class="sc">!=</span><span class="dv">0</span>)</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>uniID <span class="ot">&lt;-</span> df.inv<span class="sc">$</span>uniID</span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a>df.inv <span class="ot">&lt;-</span> <span class="fu">select</span>(df.inv, <span class="sc">-</span>uniID)</span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(df.inv) <span class="ot">&lt;-</span> uniID</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">#site levels by species</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>func.inv <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(ptraits.inv, df.inv, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: Only one continuous trait or dimension in 'x'. FRic was measured as the range, NOT as the convex hull volume. 
FDiv: Cannot not be computed when 'x' contains one single continuous trait or dimension. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>cwm.inv <span class="ot">&lt;-</span> func.inv<span class="sc">$</span>CWM</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>cwm.inv<span class="sc">$</span>uniID <span class="ot">&lt;-</span> uniID</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>cwm.inv <span class="ot">&lt;-</span> <span class="fu">rename</span>(cwm.inv, <span class="at">cwm.inv =</span> seed.weight)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co">#natives</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>natnames <span class="ot">&lt;-</span> nat<span class="sc">$</span>species</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>ptraits.nat <span class="ot">&lt;-</span> <span class="fu">filter</span>(ptraits, <span class="fu">row.names</span>(ptraits) <span class="sc">%in%</span> natnames)</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>natnames <span class="ot">&lt;-</span> <span class="fu">append</span>(natnames, <span class="st">"uniID"</span>)</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(natnames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Achyronychia.cooperi"      "Acmispon.strigosus"       
 [3] "Acmispon.wrangelianus"     "Aliciella.leptomeria"     
 [5] "Allium.nevadense"          "Amsinckia.tesselata"      
 [7] "Astragalus.didymocarpus"   "Astragalus.lentigonsus"   
 [9] "Astragalus.nuttallianus"   "Calyptridium.monandrum"   
[11] "Camissonia.campestris"     "Castilleja.exserta"       
[13] "Caulanthus.lasiophyllus"   "Chaenactis.carphoclinia"  
[15] "Chaenactis.fremonti"       "Chorizanthe.brevicornu"   
[17] "Chorizanthe.rigida"        "Chylismia.brevipes"       
[19] "Chylismia.caliviformis"    "Cryptantha.nevadensis"    
[21] "Cryptantha.sp"             "Dalea.mollissima"         
[23] "Dasyochloa.pulchella"      "Delphinium.parishii"      
[25] "Descurainia.pinnata"       "Ditaxis.lanceolata"       
[27] "Eleymus.glaucus"           "Eremalche.parryi"         
[29] "Eremothera.boothi"         "Eriastrum.diffusum"       
[31] "Eriastrum.eremicum"        "Eriogonum.gracillimum"    
[33] "Eriogonum.reniforme"       "Eriogonum.trichopes"      
[35] "Eriophyllum.pringlei"      "Eriophyllum.wallacei"     
[37] "Eschscholzia.glyptosperma" "Eschscholzia.minutiflora" 
[39] "Festuca.microstachys"      "Festuca.octoflora"        
[41] "Gilia.clokeyi NA"          "Globemallow. like bells"  
[43] "Lastarriaea.coriacea"      "Lasthenia.californica"    
[45] "Lepidium.lasiocarpum"      "Leptosiphon.liniflorus"   
[47] "Linanthus.demissis"        "Loeseliastrum.schotti"    
[49] "Logfia.depressa"           "Lupinus.arizonicus"       
[51] "Lupinus.flavoculatus"      "Lupinus.microcarpus"      
[53] "Malacothrix.glabrata"      "Menzelia.sp"              
[55] "Monoptilon.bellioides"     "Nama.demissa"             
[57] "Nemacladus.sp"             "Oenothera.cespitosa"      
[59] "Oxytheca.perfoliata"       "Pectocarya.sp"            
[61] "Phacelia.fremontii"        "Phacelia.ramossima"       
[63] "Phacelia.tanacetifolia"    "Pholistoma.membranaceum"  
[65] "Plantago.ovata"            "Poa.secunda"              
[67] "Rafinesquia.californica"   "Rafinesquia.neomexicana"  
[69] "Salvia.carduacea"          "Salvia.columbariae"       
[71] "Stephanomeria.exigua"      "Stipa.pulchra"            
[73] "Stylocline.micropoides"    "uniID"                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> comm[, natnames]</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>df.subset.nat <span class="ot">&lt;-</span> df.subset</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>natnames <span class="ot">&lt;-</span> natnames[(natnames <span class="sc">%in%</span> <span class="fu">row.names</span>(ptraits))]</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>natnames <span class="ot">&lt;-</span> <span class="fu">append</span>(natnames, <span class="st">"uniID"</span>)</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>df.nat <span class="ot">&lt;-</span> df.subset.nat[, natnames]</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>df.nat <span class="ot">&lt;-</span> df.nat<span class="sc">%&gt;%</span><span class="fu">filter</span>(<span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))<span class="sc">!=</span><span class="dv">0</span>)</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>uniID <span class="ot">&lt;-</span> df.nat<span class="sc">$</span>uniID</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>df.nat <span class="ot">&lt;-</span> <span class="fu">select</span>(df.nat, <span class="sc">-</span>uniID)</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(df.nat) <span class="ot">&lt;-</span> uniID</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#site levels by species</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>func.nat <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(ptraits.nat, df.nat, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)

Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: Only one continuous trait or dimension in 'x'. FRic was measured as the range, NOT as the convex hull volume. 
FDiv: Cannot not be computed when 'x' contains one single continuous trait or dimension. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>cwm.nat <span class="ot">&lt;-</span> func.nat<span class="sc">$</span>CWM</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>cwm.nat<span class="sc">$</span>uniID <span class="ot">&lt;-</span> uniID</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>cwm.nat <span class="ot">&lt;-</span> <span class="fu">rename</span>(cwm.nat, <span class="at">nat.cwm =</span> seed.weight)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co">#cwm to main dataset</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, cwm, <span class="at">by =</span> <span class="st">"uniID"</span>)</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, cwm.inv, <span class="at">by =</span> <span class="st">"uniID"</span>)</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, cwm.nat, <span class="at">by =</span> <span class="st">"uniID"</span>)</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a><span class="co">#site level by species</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>comm.site <span class="ot">&lt;-</span> plt_wide <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Site, Year.NA) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Site'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>comm.site <span class="ot">&lt;-</span> <span class="fu">rename</span>(comm.site, <span class="at">Ditaxis.lanceolata =</span> Ditaxis.serrata)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>uniID <span class="ot">&lt;-</span> <span class="fu">paste</span>(comm.site<span class="sc">$</span>Site, comm.site<span class="sc">$</span>Year.NA)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>comm.site <span class="ot">&lt;-</span> <span class="fu">select</span>(comm.site, <span class="dv">4</span><span class="sc">:</span><span class="dv">88</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Adding missing grouping variables: `Site`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(comm.site) <span class="ot">&lt;-</span> uniID</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">names</span>(comm.site)[(<span class="fu">names</span>(comm.site) <span class="sc">%in%</span> <span class="fu">row.names</span>(ptraits))]</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="co">#no zero rows at site level</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> comm.site[, names.use]</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>func.site <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(ptraits, df.subset, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)

Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FRic: Only one continuous trait or dimension in 'x'. FRic was measured as the range, NOT as the convex hull volume. 
FDiv: Cannot not be computed when 'x' contains one single continuous trait or dimension. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Site levels by provenance</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">names</span>(comm.site)[(<span class="fu">names</span>(comm.site) <span class="sc">%in%</span> <span class="fu">row.names</span>(ptraits.inv))]</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="co">#no zero rows at site level</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>df.subset.inv <span class="ot">&lt;-</span> comm.site[, names.use]</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>func.site.inv <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(ptraits.inv, df.subset.inv, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: Only one continuous trait or dimension in 'x'. FRic was measured as the range, NOT as the convex hull volume. 
FDiv: Cannot not be computed when 'x' contains one single continuous trait or dimension. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">names</span>(comm.site)[(<span class="fu">names</span>(comm.site) <span class="sc">%in%</span> <span class="fu">row.names</span>(ptraits.nat))]</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co">#no zero rows at site level</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>df.subset.nat <span class="ot">&lt;-</span> comm.site[, names.use]</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>func.site.nat <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(ptraits.nat, df.subset.nat, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)

Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: Only one continuous trait or dimension in 'x'. FRic was measured as the range, NOT as the convex hull volume. 
FDiv: Cannot not be computed when 'x' contains one single continuous trait or dimension. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">#join all the site levels to the other plant site level</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>cwm.site <span class="ot">&lt;-</span> func.site<span class="sc">$</span>CWM</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>cwm.site <span class="ot">&lt;-</span> <span class="fu">rename</span>(cwm.site, <span class="at">cwm.site =</span> seed.weight)</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>cwm.site.inv <span class="ot">&lt;-</span> func.site.inv<span class="sc">$</span>CWM</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>cwm.site.inv <span class="ot">&lt;-</span> <span class="fu">rename</span>(cwm.site.inv, <span class="at">cwm.site.inv =</span> seed.weight)</span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>cwm.site.nat <span class="ot">&lt;-</span> func.site.nat<span class="sc">$</span>CWM</span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>cwm.site.nat <span class="ot">&lt;-</span> <span class="fu">rename</span>(cwm.site.nat, <span class="at">cwm.site.nat =</span> seed.weight)</span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>mn.plt <span class="ot">&lt;-</span> <span class="fu">cbind</span>(mn.plt, cwm.site, cwm.site.inv, cwm.site.nat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="seed-removal" class="level2">
<h2 class="anchored" data-anchor-id="seed-removal">Seed Removal</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>seed2023 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/seedrates2023.csv"</span>)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="co">#526 put out</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>seed2023 <span class="ot">&lt;-</span> <span class="fu">filter</span>(seed2023, ending.weight <span class="sc">!=</span> <span class="st">"disturbed"</span>)</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>seed2023 <span class="ot">&lt;-</span> <span class="fu">filter</span>(seed2023, ending.weight <span class="sc">!=</span> <span class="st">"broken"</span>)</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>seed2023 <span class="ot">&lt;-</span> <span class="fu">filter</span>(seed2023, ending.weight <span class="sc">!=</span> <span class="st">"was never put out"</span>)</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>seed2023 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(seed2023, <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>)</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>seed2024 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/seedsrates2024.csv"</span>)</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>seed2024 <span class="ot">&lt;-</span> <span class="fu">filter</span>(seed2024, ending.weight <span class="sc">!=</span> <span class="st">"disturbed"</span>)</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>seed2024 <span class="ot">&lt;-</span> <span class="fu">filter</span>(seed2024, ending.weight <span class="sc">!=</span> <span class="st">"not put out"</span> <span class="sc">&amp;</span> ending.weight <span class="sc">!=</span> <span class="st">"never put out"</span>)</span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>seed2024<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"yucca"</span>, <span class="st">"HOM"</span>, seed2024<span class="sc">$</span>Site)</span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">rbind</span>(seed2023, seed2024)</span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>ending.weight <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(seeds<span class="sc">$</span>ending.weight)</span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-17"><a href="#cb86-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-18"><a href="#cb86-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-19"><a href="#cb86-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-20"><a href="#cb86-20" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(seeds<span class="sc">$</span>Size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "small"  "med"    "large"  "medium" "large "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Size <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, seeds<span class="sc">$</span>Size)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Size <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"medium"</span>, <span class="st">"med"</span>, seeds<span class="sc">$</span>Size)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(seeds<span class="sc">$</span>Year)</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, seeds<span class="sc">$</span>Site)</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>ndvi<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(ndvi<span class="sc">$</span>Year)</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>ndvi <span class="ot">&lt;-</span> <span class="fu">unique</span>(ndvi)</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>ndvi <span class="ot">&lt;-</span> <span class="fu">filter</span>(ndvi, Season <span class="sc">==</span> <span class="st">"spring"</span>)</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"YuccaGrove"</span>, <span class="st">"Yucca"</span>, seeds<span class="sc">$</span>Site)</span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama1"</span>, <span class="st">"Cuyama 1"</span>, seeds<span class="sc">$</span>Site)</span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama2"</span>, <span class="st">"Cuyama 2"</span>, seeds<span class="sc">$</span>Site)</span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">left_join</span>(seeds, ndvi, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span>))</span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">unique</span>(seeds)</span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">left_join</span>(seeds, precip, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ant-abundance-and-richness---pitfall-trap-level" class="level1">
<h1>Ant Abundance and Richness - pitfall trap level</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>arth2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/pitfall_arth.csv"</span>)</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>ants <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(arth2, Family <span class="sc">==</span> <span class="st">"Formicidae"</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(ants<span class="sc">$</span>count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 629</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ants<span class="sc">$</span>Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Cuyama 2"  "Cuyama 1"  "Tecopa"    "HOM"       "Sheephole" "Yucca"    
[7] "Barstow"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ants<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2023 2024</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>ants <span class="ot">&lt;-</span> <span class="fu">filter</span>(ants, Species <span class="sc">!=</span> <span class="st">"alate"</span>)</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>ants <span class="ot">&lt;-</span> <span class="fu">filter</span>(ants, Species <span class="sc">!=</span> <span class="st">"alata"</span>)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>ants <span class="ot">&lt;-</span> <span class="fu">filter</span>(ants, Species <span class="sc">!=</span> <span class="st">"damaged"</span>)</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>ants <span class="ot">&lt;-</span> <span class="fu">filter</span>(ants, Genus <span class="sc">!=</span> <span class="st">"damaged"</span>)</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>ants <span class="ot">&lt;-</span> <span class="fu">filter</span>(ants, Species <span class="sc">!=</span> <span class="st">"alate/queen"</span>)  </span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>ants<span class="sc">$</span>Genus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, ants<span class="sc">$</span>Genus)</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>sp <span class="ot">&lt;-</span> ants <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Genus, Species) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">sum</span>(count))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Genus'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(sp, <span class="st">"clean Data/ants_species.csv"</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(ants, <span class="st">"clean Data/ants_only.csv"</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>ants <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(ants, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">11</span>)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="co">#make wide</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ants)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   314 obs. of  6 variables:
 $ Year   : int  2023 2023 2024 2024 2024 2023 2023 2023 2023 2023 ...
 $ Season : chr  "spring" "spring" "spring" "spring" ...
 $ Site   : chr  "HOM" "HOM" "Sheephole" "Sheephole" ...
 $ label  : chr  "S29" "S30" "O19" "O20" ...
 $ count  : int  1 1 1 1 1 1 1 1 1 1 ...
 $ Species: chr  "Aphaenogaster megommata" "Aphaenogaster megommata" "Aphaenogaster megommata" "Aphaenogaster megommata" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>ants <span class="ot">&lt;-</span> ants <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Year, Season, Site, label, Species) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">abun =</span> <span class="fu">sum</span>(count))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Year', 'Season', 'Site', 'label'. You can
override using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>ants_wide <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(ants, <span class="at">names_from =</span> Species, <span class="at">values_from =</span> abun)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>ants_wide[<span class="fu">is.na</span>(ants_wide)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>envants <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(ants_wide, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>commants <span class="ot">&lt;-</span> ants_wide <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">29</span>)</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>richness <span class="ot">&lt;-</span> <span class="fu">specnumber</span>(commants)</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>abun <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(commants)</span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>rich <span class="ot">&lt;-</span> richness</span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>abun <span class="ot">&lt;-</span> abun</span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a>envants <span class="ot">&lt;-</span> envants <span class="sc">%&gt;%</span> <span class="fu">separate</span>(label, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Microsite"</span>, <span class="st">"rep"</span>), <span class="at">sep =</span> <span class="dv">1</span>)</span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-17"><a href="#cb101-17" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>Microsite <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"S"</span>, <span class="st">"shrub"</span>, envants<span class="sc">$</span>Microsite)</span>
<span id="cb101-18"><a href="#cb101-18" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>Microsite <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"O"</span>, <span class="st">"open"</span>, envants<span class="sc">$</span>Microsite)</span>
<span id="cb101-19"><a href="#cb101-19" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(envants<span class="sc">$</span>Year)</span>
<span id="cb101-20"><a href="#cb101-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-21"><a href="#cb101-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-22"><a href="#cb101-22" aria-hidden="true" tabindex="-1"></a><span class="co">#need empty pitfalls to fill in zeroes</span></span>
<span id="cb101-23"><a href="#cb101-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-24"><a href="#cb101-24" aria-hidden="true" tabindex="-1"></a>reps <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/reps.csv"</span>)</span>
<span id="cb101-25"><a href="#cb101-25" aria-hidden="true" tabindex="-1"></a>pitsreps <span class="ot">&lt;-</span> <span class="fu">filter</span>(reps, Pit <span class="sc">==</span> <span class="st">"y"</span>)</span>
<span id="cb101-26"><a href="#cb101-26" aria-hidden="true" tabindex="-1"></a>pitsreps<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(pitsreps<span class="sc">$</span>year)</span>
<span id="cb101-27"><a href="#cb101-27" aria-hidden="true" tabindex="-1"></a>pitsreps<span class="sc">$</span>Rep <span class="ot">&lt;-</span> <span class="fu">as.character</span>(pitsreps<span class="sc">$</span>Rep)</span>
<span id="cb101-28"><a href="#cb101-28" aria-hidden="true" tabindex="-1"></a>ptsreps <span class="ot">&lt;-</span> <span class="fu">left_join</span>(pitsreps, envants, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"Year"</span>, <span class="st">"season"</span> <span class="ot">=</span> <span class="st">"Season"</span>, <span class="st">"Microsite"</span>, <span class="st">"Rep"</span> <span class="ot">=</span> <span class="st">"rep"</span>))</span>
<span id="cb101-29"><a href="#cb101-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-30"><a href="#cb101-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-31"><a href="#cb101-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-32"><a href="#cb101-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-33"><a href="#cb101-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-34"><a href="#cb101-34" aria-hidden="true" tabindex="-1"></a>ndvi<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(ndvi<span class="sc">$</span>Year)</span>
<span id="cb101-35"><a href="#cb101-35" aria-hidden="true" tabindex="-1"></a>ptsreps <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ptsreps, ndvi, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"Year"</span>))</span>
<span id="cb101-36"><a href="#cb101-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-37"><a href="#cb101-37" aria-hidden="true" tabindex="-1"></a>ptsreps <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ptsreps, precip, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"Year"</span>))</span>
<span id="cb101-38"><a href="#cb101-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-39"><a href="#cb101-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-40"><a href="#cb101-40" aria-hidden="true" tabindex="-1"></a>ptsreps<span class="sc">$</span>rich[<span class="fu">is.na</span>(ptsreps<span class="sc">$</span>rich)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb101-41"><a href="#cb101-41" aria-hidden="true" tabindex="-1"></a>ptsreps<span class="sc">$</span>abun[<span class="fu">is.na</span>(ptsreps<span class="sc">$</span>abun)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb101-42"><a href="#cb101-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-43"><a href="#cb101-43" aria-hidden="true" tabindex="-1"></a>reps <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Pit) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  Pit   `n()`
  &lt;chr&gt; &lt;int&gt;
1 ""      855
2 "N"      20
3 "n"       6
4 "y"     535</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(reps)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1416 obs. of  9 variables:
 $ year         : int  2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 ...
 $ Rep          : int  1 1 2 2 3 3 4 4 5 5 ...
 $ Site         : chr  "Tecopa" "Tecopa" "Tecopa" "Tecopa" ...
 $ season       : chr  "spring" "spring" "spring" "spring" ...
 $ Date         : chr  "2023-04-11" "2023-04-11" "2023-04-11" "2023-04-11" ...
 $ Microsite    : chr  "shrub" "open" "shrub" "open" ...
 $ Pit          : chr  "" "" "" "" ...
 $ X            : logi  NA NA NA NA NA NA ...
 $ shrub.species: chr  "" "" "" "" ...</code></pre>
</div>
</div>
</section>
<section id="cwm-ants" class="level1">
<h1>CWM Ants</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/anttraits.csv"</span>)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">mutate</span>(atraits, <span class="at">r.mand =</span> mandible<span class="sc">/</span>webers)</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(atraits<span class="sc">$</span>ant.species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Dorymyrmex insanus"         "Forelius mccooki"          
 [3] "Messor pergandei"           "Myrmecocystus kennedyi"    
 [5] "Solenopsis xyloni"          "Forelius pruinosis"        
 [7] "Myrmecocystus testaceus"    "Pheidole hyatti"           
 [9] "Solenopsis molesta"         "Myrmecocystus mexicanus"   
[11] "Pogonomyrmex"               "Aphaenogaster megommata"   
[13] "Myrmecocystus lugubris"     "Crematogaster depilis"     
[15] "Leptothorax"                "Monomorium ergotyna/minima"
[17] "Myrmecocystus ewarti"       "Myrmecocystus flaviceps"   
[19] "Myrmecocystus yuma"         "Pheidole vistana"          
[21] "Pogonomyrmex californicus"  "Myrmecocystus semirufus"   
[23] "Myrmecocystus tenuinodis"   "Pheidole desertorum"       
[25] "Pogonomyrmex rugusus"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(atraits<span class="sc">$</span>site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Barstow"   "Cuyama 1"  "Cuyama 2"  "HOM"       "Sheephole" "Tecopa"   
[7] "Yucca"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(site, ant.species) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">r.mand =</span> <span class="fu">mean</span>(r.mand), <span class="at">webers =</span> <span class="fu">mean</span>(webers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'site'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>atraits<span class="sc">$</span>species.site <span class="ot">&lt;-</span> <span class="fu">paste</span>(atraits<span class="sc">$</span>ant.species, atraits<span class="sc">$</span>site)</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(atraits) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ants<span class="sc">$</span>Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Barstow"   "Cuyama 1"  "Cuyama 2"  "HOM"       "Sheephole" "Tecopa"   
[7] "Yucca"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reorder ants data</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> ants</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>tr_wide<span class="sc">$</span>species.site <span class="ot">&lt;-</span> <span class="fu">paste</span>(tr_wide<span class="sc">$</span>Species, tr_wide<span class="sc">$</span>Site)</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pres =</span> <span class="fu">ifelse</span>(abun <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(tr_wide, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(tr_wide, <span class="at">names_from =</span> species.site, <span class="at">values_from =</span> pres)</span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>tr_wide[<span class="fu">is.na</span>(tr_wide)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>tr_wide<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="fu">paste</span>(tr_wide<span class="sc">$</span>Year, tr_wide<span class="sc">$</span>Season, tr_wide<span class="sc">$</span>Site, tr_wide<span class="sc">$</span>label)</span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">65</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">64</span>)</span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a><span class="co">#make a vector of the row names and remove the first value</span></span>
<span id="cb113-19"><a href="#cb113-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-20"><a href="#cb113-20" aria-hidden="true" tabindex="-1"></a>tr.names <span class="ot">&lt;-</span> tr_wide<span class="sc">$</span>ID</span>
<span id="cb113-21"><a href="#cb113-21" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb113-22"><a href="#cb113-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-23"><a href="#cb113-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-24"><a href="#cb113-24" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">names</span>(tr_wide)[(<span class="fu">names</span>(tr_wide) <span class="sc">%in%</span> atraits<span class="sc">$</span>species.site)]</span>
<span id="cb113-25"><a href="#cb113-25" aria-hidden="true" tabindex="-1"></a><span class="co">#add the uniID to the name vector</span></span>
<span id="cb113-26"><a href="#cb113-26" aria-hidden="true" tabindex="-1"></a><span class="co">#names.use &lt;- append(names.use, "uniID")</span></span>
<span id="cb113-27"><a href="#cb113-27" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> tr_wide[, names.use, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb113-28"><a href="#cb113-28" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df.subset[,<span class="fu">order</span>(names.use), drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb113-29"><a href="#cb113-29" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits[<span class="fu">order</span>(atraits<span class="sc">$</span>species.site),]</span>
<span id="cb113-30"><a href="#cb113-30" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(df) <span class="ot">&lt;-</span> tr.names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, <span class="fu">colnames</span>(df))</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="co">#fill in missing C. depilis traits with those from other sites</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>atraits[<span class="dv">4</span>,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fl">0.4389248</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>atraits[<span class="dv">6</span>,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fl">0.4389248</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>atraits[<span class="dv">4</span>,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fl">0.885</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>atraits[<span class="dv">6</span>,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fl">0.885</span></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>atr.names <span class="ot">&lt;-</span> atraits<span class="sc">$</span>species.site</span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>atr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, atr.names)</span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(atraits) <span class="ot">&lt;-</span> atr.names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">row.names</span>(atraits), <span class="fu">colnames</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">colnames</span>(df), <span class="fu">row.names</span>(atraits))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">row.names</span>(atraits), <span class="fu">colnames</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>ck <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">row.names</span>(atraits), <span class="fu">colnames</span>(df))</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(atraits) <span class="sc">==</span> <span class="fu">colnames</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(atraits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [59 × 2] (S3: tbl_df/tbl/data.frame)
 $ r.mand: num [1:59] 0.371 0.362 0.345 0.439 0.439 ...
 $ webers: num [1:59] 1.442 1.629 1.719 0.885 0.885 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(atraits) <span class="ot">&lt;-</span> atr.names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(atraits)</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(df)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   227 obs. of  59 variables:
 $ AphaenogastermegommataHOM         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ AphaenogastermegommataSheephole   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ AphaenogastermegommataTecopa      : num  0 0 0 0 0 0 0 0 0 0 ...
 $ CrematogasterdepilisSheephole     : num  0 0 0 0 0 0 0 0 0 0 ...
 $ CrematogasterdepilisTecopa        : num  0 0 0 0 0 0 0 0 0 0 ...
 $ CrematogasterdepilisYucca         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusBarstow          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusCuyama2          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusHOM              : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusSheephole        : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusTecopa           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusYucca            : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ForeliusmccookiBarstow            : num  0 1 0 0 0 0 0 0 0 0 ...
 $ ForeliusmccookiYucca              : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ForeliuspruinosisCuyama1          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ForeliuspruinosisCuyama2          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ForeliuspruinosisSheephole        : num  0 0 0 0 0 0 0 0 0 0 ...
 $ LeptothoraxSheephole              : num  0 0 0 0 0 0 0 0 0 0 ...
 $ LeptothoraxYucca                  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MessorpergandeiBarstow            : num  1 1 1 1 0 1 0 1 1 1 ...
 $ MessorpergandeiCuyama1            : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MessorpergandeiCuyama2            : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MessorpergandeiHOM                : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MessorpergandeiTecopa             : num  0 0 0 0 0 0 0 0 0 0 ...
 $ Monomoriumergotyna/minimaSheephole: num  0 0 0 0 0 0 0 0 0 0 ...
 $ Monomoriumergotyna/minimaTecopa   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystusewartiSheephole      : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystusflavicepsSheephole   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystusflavicepsYucca       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystuskennedyiBarstow      : num  0 0 0 0 1 0 1 0 0 0 ...
 $ MyrmecocystuskennedyiCuyama1      : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystuskennedyiCuyama2      : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystuskennedyiHOM          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystuslugubrisHOM          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystusmexicanusCuyama2     : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystusmexicanusHOM         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystusmexicanusYucca       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystussemirufusTecopa      : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystustenuinodisTecopa     : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystustestaceusCuyama1     : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MyrmecocystusyumaSheephole        : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidoledesertorumYucca           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidolehyattiCuyama1             : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidolehyattiCuyama2             : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidolehyattiHOM                 : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidolevistanaSheephole          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PogonomyrmexcalifornicusSheephole : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PogonomyrmexcalifornicusTecopa    : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PogonomyrmexCuyama2               : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PogonomyrmexrugususYucca          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsismolestaCuyama1          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsismolestaCuyama2          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniBarstow           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniCuyama1           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniCuyama2           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniHOM               : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniSheephole         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniTecopa            : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniYucca             : num  0 0 0 0 0 0 0 0 0 0 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(df) <span class="ot">&lt;-</span> tr.names</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(atraits) <span class="ot">&lt;-</span> atr.names</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>func.ants <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(atraits, df, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: To respect s &gt; t, FRic could not be calculated for communities with &lt;3 functionally singular species. 
FRic: No dimensionality reduction was required. The 2 PCoA axes were kept as 'traits'. 
FDiv: Could not be calculated for communities with &lt;3 functionally singular species. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>cwmants <span class="ot">&lt;-</span> <span class="fu">cbind</span>(tr.names, func.ants<span class="sc">$</span>CWM)</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>cwmants<span class="sc">$</span>tr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama 1"</span>, <span class="st">"Cuyama1"</span>, cwmants<span class="sc">$</span>tr.names)</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>cwmants<span class="sc">$</span>tr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama 2"</span>, <span class="st">"Cuyama2"</span>, cwmants<span class="sc">$</span>tr.names)</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="co">#make the labels match and join back to trap data</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>cwmants <span class="ot">&lt;-</span> <span class="fu">separate</span>(cwmants, <span class="at">col =</span> <span class="dv">1</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"season"</span>, <span class="st">"Site"</span>, <span class="st">"Label"</span>), <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 4 pieces. Additional pieces discarded in 1 rows [171].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>cwmants <span class="ot">&lt;-</span> <span class="fu">separate</span>(cwmants, <span class="at">col =</span> <span class="st">"Label"</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Microsite"</span>, <span class="st">"Rep"</span>), <span class="at">sep =</span> <span class="dv">1</span>)</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>cwmants<span class="sc">$</span>Microsite <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"S"</span>, <span class="st">"shrub"</span>, cwmants<span class="sc">$</span>Microsite)</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>cwmants<span class="sc">$</span>Microsite <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"O"</span>, <span class="st">"open"</span>, cwmants<span class="sc">$</span>Microsite)</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>cwmants<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama1"</span>, <span class="st">"Cuyama 1"</span>, cwmants<span class="sc">$</span>Site)</span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>cwmants<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama2"</span>, <span class="st">"Cuyama 2"</span>, cwmants<span class="sc">$</span>Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="granivores-only" class="level1">
<h1>Granivores only</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>commgran <span class="ot">&lt;-</span> ants_wide <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">29</span>)</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>sp <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw data/ants_species.csv"</span>)</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>sp <span class="ot">&lt;-</span> <span class="fu">filter</span>(sp, class <span class="sc">!=</span> <span class="st">"other"</span>)</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>sp <span class="ot">&lt;-</span> sp<span class="sc">$</span>Species</span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">names</span>(commgran)[(<span class="fu">names</span>(commgran) <span class="sc">%in%</span> sp)]</span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> commgran[, names.use]</span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a>commgran <span class="ot">&lt;-</span> df.subset</span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a>gr.richness <span class="ot">&lt;-</span> <span class="fu">specnumber</span>(commgran)</span>
<span id="cb138-13"><a href="#cb138-13" aria-hidden="true" tabindex="-1"></a>gr.abun <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(commgran)</span>
<span id="cb138-14"><a href="#cb138-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-15"><a href="#cb138-15" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>rich <span class="ot">&lt;-</span> richness</span>
<span id="cb138-16"><a href="#cb138-16" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>abun <span class="ot">&lt;-</span> abun</span>
<span id="cb138-17"><a href="#cb138-17" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>gr.richness <span class="ot">&lt;-</span> gr.richness</span>
<span id="cb138-18"><a href="#cb138-18" aria-hidden="true" tabindex="-1"></a>envants<span class="sc">$</span>gr.abun <span class="ot">&lt;-</span> gr.abun</span>
<span id="cb138-19"><a href="#cb138-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-20"><a href="#cb138-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-21"><a href="#cb138-21" aria-hidden="true" tabindex="-1"></a><span class="co">#need empty pitfalls to fill in zeroes</span></span>
<span id="cb138-22"><a href="#cb138-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-23"><a href="#cb138-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-24"><a href="#cb138-24" aria-hidden="true" tabindex="-1"></a>ptsreps <span class="ot">&lt;-</span> <span class="fu">left_join</span>(pitsreps, envants, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"Year"</span>, <span class="st">"season"</span> <span class="ot">=</span> <span class="st">"Season"</span>, <span class="st">"Microsite"</span>, <span class="st">"Rep"</span> <span class="ot">=</span> <span class="st">"rep"</span>))</span>
<span id="cb138-25"><a href="#cb138-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-26"><a href="#cb138-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-27"><a href="#cb138-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-28"><a href="#cb138-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-29"><a href="#cb138-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-30"><a href="#cb138-30" aria-hidden="true" tabindex="-1"></a>ndvi<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(ndvi<span class="sc">$</span>Year)</span>
<span id="cb138-31"><a href="#cb138-31" aria-hidden="true" tabindex="-1"></a>ptsreps <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ptsreps, ndvi, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"Year"</span>))</span>
<span id="cb138-32"><a href="#cb138-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-33"><a href="#cb138-33" aria-hidden="true" tabindex="-1"></a>ptsreps <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ptsreps, precip, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"Year"</span>))</span>
<span id="cb138-34"><a href="#cb138-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-35"><a href="#cb138-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-36"><a href="#cb138-36" aria-hidden="true" tabindex="-1"></a>ptsreps<span class="sc">$</span>rich[<span class="fu">is.na</span>(ptsreps<span class="sc">$</span>rich)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb138-37"><a href="#cb138-37" aria-hidden="true" tabindex="-1"></a>ptsreps<span class="sc">$</span>abun[<span class="fu">is.na</span>(ptsreps<span class="sc">$</span>abun)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb138-38"><a href="#cb138-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-39"><a href="#cb138-39" aria-hidden="true" tabindex="-1"></a>ptsreps<span class="sc">$</span>gr.richness[<span class="fu">is.na</span>(ptsreps<span class="sc">$</span>gr.richness)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb138-40"><a href="#cb138-40" aria-hidden="true" tabindex="-1"></a>ptsreps<span class="sc">$</span>gr.abun[<span class="fu">is.na</span>(ptsreps<span class="sc">$</span>gr.abun)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>#Granivore Trait Calculations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reorder ants data</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> ants</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>tr <span class="ot">&lt;-</span> <span class="fu">filter</span>(ants, Species <span class="sc">%in%</span> sp)</span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr</span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>tr_wide<span class="sc">$</span>species.site <span class="ot">&lt;-</span> <span class="fu">paste</span>(tr_wide<span class="sc">$</span>Species, tr_wide<span class="sc">$</span>Site)</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pres =</span> <span class="fu">ifelse</span>(abun <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(tr_wide, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(tr_wide, <span class="at">names_from =</span> species.site, <span class="at">values_from =</span> pres)</span>
<span id="cb139-12"><a href="#cb139-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-13"><a href="#cb139-13" aria-hidden="true" tabindex="-1"></a>tr_wide[<span class="fu">is.na</span>(tr_wide)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb139-14"><a href="#cb139-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-15"><a href="#cb139-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-16"><a href="#cb139-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-17"><a href="#cb139-17" aria-hidden="true" tabindex="-1"></a>tr_wide<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="fu">paste</span>(tr_wide<span class="sc">$</span>Year, tr_wide<span class="sc">$</span>Season, tr_wide<span class="sc">$</span>Site, tr_wide<span class="sc">$</span>label)</span>
<span id="cb139-18"><a href="#cb139-18" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">42</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">41</span>)</span>
<span id="cb139-19"><a href="#cb139-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-20"><a href="#cb139-20" aria-hidden="true" tabindex="-1"></a><span class="co">#make a vector of the row names and remove the first value</span></span>
<span id="cb139-21"><a href="#cb139-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-22"><a href="#cb139-22" aria-hidden="true" tabindex="-1"></a>tr.names <span class="ot">&lt;-</span> tr_wide<span class="sc">$</span>ID</span>
<span id="cb139-23"><a href="#cb139-23" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb139-24"><a href="#cb139-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-25"><a href="#cb139-25" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/anttraits.csv"</span>)</span>
<span id="cb139-26"><a href="#cb139-26" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">mutate</span>(atraits, <span class="at">r.mand =</span> mandible<span class="sc">/</span>webers)</span>
<span id="cb139-27"><a href="#cb139-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-28"><a href="#cb139-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-29"><a href="#cb139-29" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(site, ant.species) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">r.mand =</span> <span class="fu">mean</span>(r.mand), <span class="at">webers =</span> <span class="fu">mean</span>(webers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'site'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>atraits<span class="sc">$</span>species.site <span class="ot">&lt;-</span> <span class="fu">paste</span>(atraits<span class="sc">$</span>ant.species, atraits<span class="sc">$</span>site)</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">filter</span>(atraits, ant.species <span class="sc">%in%</span> names.use)</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(atraits) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ants<span class="sc">$</span>Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Barstow"   "Cuyama 1"  "Cuyama 2"  "HOM"       "Sheephole" "Tecopa"   
[7] "Yucca"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">names</span>(tr_wide)[(<span class="fu">names</span>(tr_wide) <span class="sc">%in%</span> atraits<span class="sc">$</span>species.site)]</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="co">#add the uniID to the name vector</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="co">#names.use &lt;- append(names.use, "uniID")</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> tr_wide[, names.use, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df.subset[,<span class="fu">order</span>(names.use), drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits[<span class="fu">order</span>(atraits<span class="sc">$</span>species.site),]</span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(df) <span class="ot">&lt;-</span> tr.names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, <span class="fu">colnames</span>(df))</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>atr.names <span class="ot">&lt;-</span> atraits<span class="sc">$</span>species.site</span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>atr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, atr.names)</span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(atraits) <span class="ot">&lt;-</span> atr.names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">row.names</span>(atraits), <span class="fu">colnames</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">colnames</span>(df), <span class="fu">row.names</span>(atraits))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">row.names</span>(atraits), <span class="fu">colnames</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(atraits) <span class="ot">&lt;-</span> atr.names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(atraits)</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(df)</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   190 obs. of  37 variables:
 $ AphaenogastermegommataHOM        : num  0 0 0 0 0 0 0 0 0 0 ...
 $ AphaenogastermegommataSheephole  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ AphaenogastermegommataTecopa     : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusBarstow         : num  0 0 0 0 0 0 0 0 0 1 ...
 $ DorymyrmexinsanusCuyama2         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusHOM             : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusSheephole       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusTecopa          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DorymyrmexinsanusYucca           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ForeliusmccookiBarstow           : num  0 1 0 0 0 0 0 0 0 0 ...
 $ ForeliusmccookiYucca             : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ForeliuspruinosisCuyama1         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ForeliuspruinosisCuyama2         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ForeliuspruinosisSheephole       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MessorpergandeiBarstow           : num  1 1 1 1 1 1 1 1 0 0 ...
 $ MessorpergandeiCuyama1           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MessorpergandeiCuyama2           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MessorpergandeiHOM               : num  0 0 0 0 0 0 0 0 0 0 ...
 $ MessorpergandeiTecopa            : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidoledesertorumYucca          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidolehyattiCuyama1            : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidolehyattiCuyama2            : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidolehyattiHOM                : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PheidolevistanaSheephole         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PogonomyrmexcalifornicusSheephole: num  0 0 0 0 0 0 0 0 0 0 ...
 $ PogonomyrmexcalifornicusTecopa   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PogonomyrmexCuyama2              : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PogonomyrmexrugususYucca         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsismolestaCuyama1         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsismolestaCuyama2         : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniBarstow          : num  0 0 0 0 0 0 0 0 1 0 ...
 $ SolenopsisxyloniCuyama1          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniCuyama2          : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniHOM              : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniSheephole        : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniTecopa           : num  0 0 0 0 0 0 0 0 0 0 ...
 $ SolenopsisxyloniYucca            : num  0 0 0 0 0 0 0 0 0 0 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(df) <span class="ot">&lt;-</span> tr.names</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(atraits) <span class="ot">&lt;-</span> atr.names</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>func.gran <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(atraits, df, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: To respect s &gt; t, FRic could not be calculated for communities with &lt;3 functionally singular species. 
FRic: No dimensionality reduction was required. The 2 PCoA axes were kept as 'traits'. 
FDiv: Could not be calculated for communities with &lt;3 functionally singular species. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>cwmgran <span class="ot">&lt;-</span> <span class="fu">cbind</span>(tr.names, func.gran<span class="sc">$</span>CWM)</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>cwmgran<span class="sc">$</span>tr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama 1"</span>, <span class="st">"Cuyama1"</span>, cwmgran<span class="sc">$</span>tr.names)</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>cwmgran<span class="sc">$</span>tr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama 2"</span>, <span class="st">"Cuyama2"</span>, cwmgran<span class="sc">$</span>tr.names)</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="co">#make the labels match and join back to trap data</span></span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a>cwmgran <span class="ot">&lt;-</span> <span class="fu">separate</span>(cwmgran, <span class="at">col =</span> <span class="dv">1</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"season"</span>, <span class="st">"Site"</span>, <span class="st">"Label"</span>), <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 4 pieces. Additional pieces discarded in 1 rows [140].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>cwmgran <span class="ot">&lt;-</span> <span class="fu">separate</span>(cwmgran, <span class="at">col =</span> <span class="st">"Label"</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Microsite"</span>, <span class="st">"Rep"</span>), <span class="at">sep =</span> <span class="dv">1</span>)</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>cwmgran<span class="sc">$</span>Microsite <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"S"</span>, <span class="st">"shrub"</span>, cwmgran<span class="sc">$</span>Microsite)</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>cwmgran<span class="sc">$</span>Microsite <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"O"</span>, <span class="st">"open"</span>, cwmgran<span class="sc">$</span>Microsite)</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>cwmgran<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama1"</span>, <span class="st">"Cuyama 1"</span>, cwmgran<span class="sc">$</span>Site)</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>cwmgran<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama2"</span>, <span class="st">"Cuyama 2"</span>, cwmgran<span class="sc">$</span>Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="site-level-ant-cwm" class="level1">
<h1>Site level Ant CWM</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/anttraits.csv"</span>)</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">mutate</span>(atraits, <span class="at">r.mand =</span> mandible<span class="sc">/</span>webers)</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(site, ant.species) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">r.mand =</span> <span class="fu">mean</span>(r.mand), <span class="at">webers =</span> <span class="fu">mean</span>(webers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'site'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>atraits<span class="sc">$</span>species.site <span class="ot">&lt;-</span> <span class="fu">paste</span>(atraits<span class="sc">$</span>ant.species, atraits<span class="sc">$</span>site)</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(atraits) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-8"><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a><span class="co">#need the number of good pitfalls, per site, per visit</span></span>
<span id="cb164-9"><a href="#cb164-9" aria-hidden="true" tabindex="-1"></a>rps <span class="ot">&lt;-</span> ptsreps <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year, Site, season) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">pit.count =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year', 'Site'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reorder ants data</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> ants</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>tr_wide<span class="sc">$</span>species.site <span class="ot">&lt;-</span> <span class="fu">paste</span>(tr_wide<span class="sc">$</span>Species, tr_wide<span class="sc">$</span>Site)</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pres =</span> <span class="fu">ifelse</span>(abun <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(tr_wide, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Year, Site, Season, species.site) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">site.total =</span> <span class="fu">sum</span>(pres))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Year', 'Site', 'Season'. You can override
using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>rps<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(rps<span class="sc">$</span>year)</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>tr_wide<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(tr_wide<span class="sc">$</span>Year)</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tr_wide, rps, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"year"</span>, <span class="st">"Site"</span>, <span class="st">"Season"</span> <span class="ot">=</span> <span class="st">"season"</span>))</span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> <span class="fu">mutate</span>(tr_wide, <span class="at">occ =</span> site.total<span class="sc">/</span>pit.count)</span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> <span class="fu">select</span>(tr_wide, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>)</span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(tr_wide, <span class="at">names_from =</span> species.site, <span class="at">values_from =</span> occ)</span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a>tr_wide[<span class="fu">is.na</span>(tr_wide)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-12"><a href="#cb168-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-13"><a href="#cb168-13" aria-hidden="true" tabindex="-1"></a>tr_wide<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="fu">paste</span>(tr_wide<span class="sc">$</span>Year, tr_wide<span class="sc">$</span>Season, tr_wide<span class="sc">$</span>Site)</span>
<span id="cb168-14"><a href="#cb168-14" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">64</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">63</span>)</span>
<span id="cb168-15"><a href="#cb168-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-16"><a href="#cb168-16" aria-hidden="true" tabindex="-1"></a><span class="co">#make a vector of the row names and remove the first value</span></span>
<span id="cb168-17"><a href="#cb168-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-18"><a href="#cb168-18" aria-hidden="true" tabindex="-1"></a>tr.names <span class="ot">&lt;-</span> tr_wide<span class="sc">$</span>ID</span>
<span id="cb168-19"><a href="#cb168-19" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb168-20"><a href="#cb168-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-21"><a href="#cb168-21" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(tr_wide) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, <span class="fu">names</span>(tr_wide))</span>
<span id="cb168-22"><a href="#cb168-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-23"><a href="#cb168-23" aria-hidden="true" tabindex="-1"></a>names.use <span class="ot">&lt;-</span> <span class="fu">names</span>(tr_wide)[(<span class="fu">names</span>(tr_wide) <span class="sc">%in%</span> <span class="fu">row.names</span>(atraits<span class="sc">$</span>species.site))]</span>
<span id="cb168-24"><a href="#cb168-24" aria-hidden="true" tabindex="-1"></a><span class="co">#add the uniID to the name vector</span></span>
<span id="cb168-25"><a href="#cb168-25" aria-hidden="true" tabindex="-1"></a><span class="co">#names.use &lt;- append(names.use, "uniID")</span></span>
<span id="cb168-26"><a href="#cb168-26" aria-hidden="true" tabindex="-1"></a>df.subset <span class="ot">&lt;-</span> tr_wide[, names.use, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb168-27"><a href="#cb168-27" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df.subset[,<span class="fu">order</span>(names.use), drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb168-28"><a href="#cb168-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-29"><a href="#cb168-29" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits[<span class="fu">order</span>(atraits<span class="sc">$</span>species.site),]</span>
<span id="cb168-30"><a href="#cb168-30" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> tr_wide[,<span class="fu">order</span>(<span class="fu">names</span>(tr_wide))]</span>
<span id="cb168-31"><a href="#cb168-31" aria-hidden="true" tabindex="-1"></a>tr_wide <span class="ot">&lt;-</span> <span class="fu">select</span>(tr_wide, <span class="sc">-</span>LeptothoraxHOM)</span>
<span id="cb168-32"><a href="#cb168-32" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(atraits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14" "15"
[16] "16" "17" "18" "19" "20" "21" "22" "23" "24" "25" "26" "27" "28" "29" "30"
[31] "31" "32" "33" "34" "35" "36" "37" "38" "39" "40" "41" "42" "43" "44" "45"
[46] "46" "47" "48" "49" "50" "51" "52" "53" "54" "55" "56" "57" "58" "59"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(tr_wide)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "AphaenogastermegommataHOM"          "AphaenogastermegommataSheephole"   
 [3] "AphaenogastermegommataTecopa"       "CrematogasterdepilisSheephole"     
 [5] "CrematogasterdepilisTecopa"         "CrematogasterdepilisYucca"         
 [7] "DorymyrmexinsanusBarstow"           "DorymyrmexinsanusCuyama2"          
 [9] "DorymyrmexinsanusHOM"               "DorymyrmexinsanusSheephole"        
[11] "DorymyrmexinsanusTecopa"            "DorymyrmexinsanusYucca"            
[13] "ForeliusmccookiBarstow"             "ForeliusmccookiYucca"              
[15] "ForeliuspruinosisCuyama1"           "ForeliuspruinosisCuyama2"          
[17] "ForeliuspruinosisSheephole"         "LeptothoraxSheephole"              
[19] "LeptothoraxYucca"                   "MessorpergandeiBarstow"            
[21] "MessorpergandeiCuyama1"             "MessorpergandeiCuyama2"            
[23] "MessorpergandeiHOM"                 "MessorpergandeiTecopa"             
[25] "Monomoriumergotyna/minimaSheephole" "Monomoriumergotyna/minimaTecopa"   
[27] "MyrmecocystusewartiSheephole"       "MyrmecocystusflavicepsSheephole"   
[29] "MyrmecocystusflavicepsYucca"        "MyrmecocystuskennedyiBarstow"      
[31] "MyrmecocystuskennedyiCuyama1"       "MyrmecocystuskennedyiCuyama2"      
[33] "MyrmecocystuskennedyiHOM"           "MyrmecocystuslugubrisHOM"          
[35] "MyrmecocystusmexicanusCuyama2"      "MyrmecocystusmexicanusHOM"         
[37] "MyrmecocystusmexicanusYucca"        "MyrmecocystussemirufusTecopa"      
[39] "MyrmecocystustenuinodisTecopa"      "MyrmecocystustestaceusCuyama1"     
[41] "MyrmecocystusyumaSheephole"         "PheidoledesertorumYucca"           
[43] "PheidolehyattiCuyama1"              "PheidolehyattiCuyama2"             
[45] "PheidolehyattiHOM"                  "PheidolevistanaSheephole"          
[47] "PogonomyrmexcalifornicusSheephole"  "PogonomyrmexcalifornicusTecopa"    
[49] "PogonomyrmexCuyama2"                "PogonomyrmexrugususYucca"          
[51] "SolenopsismolestaCuyama1"           "SolenopsismolestaCuyama2"          
[53] "SolenopsisxyloniBarstow"            "SolenopsisxyloniCuyama1"           
[55] "SolenopsisxyloniCuyama2"            "SolenopsisxyloniHOM"               
[57] "SolenopsisxyloniSheephole"          "SolenopsisxyloniTecopa"            
[59] "SolenopsisxyloniYucca"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co">#fill in missing C. depilis traits with those from other sites</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>atraits[<span class="dv">4</span>,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fl">0.4389248</span></span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>atraits[<span class="dv">6</span>,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fl">0.4389248</span></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>atraits[<span class="dv">4</span>,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fl">0.885</span></span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>atraits[<span class="dv">6</span>,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fl">0.885</span></span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-7"><a href="#cb172-7" aria-hidden="true" tabindex="-1"></a>atr.names <span class="ot">&lt;-</span> atraits<span class="sc">$</span>species.site</span>
<span id="cb172-8"><a href="#cb172-8" aria-hidden="true" tabindex="-1"></a>atr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, atr.names)</span>
<span id="cb172-9"><a href="#cb172-9" aria-hidden="true" tabindex="-1"></a>atraits <span class="ot">&lt;-</span> atraits[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb172-10"><a href="#cb172-10" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(atraits) <span class="ot">&lt;-</span> atr.names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">row.names</span>(atraits), <span class="fu">colnames</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "AphaenogastermegommataHOM"          "AphaenogastermegommataSheephole"   
 [3] "AphaenogastermegommataTecopa"       "CrematogasterdepilisSheephole"     
 [5] "CrematogasterdepilisTecopa"         "CrematogasterdepilisYucca"         
 [7] "DorymyrmexinsanusBarstow"           "DorymyrmexinsanusCuyama2"          
 [9] "DorymyrmexinsanusHOM"               "DorymyrmexinsanusSheephole"        
[11] "DorymyrmexinsanusTecopa"            "DorymyrmexinsanusYucca"            
[13] "ForeliusmccookiBarstow"             "ForeliusmccookiYucca"              
[15] "ForeliuspruinosisCuyama1"           "ForeliuspruinosisCuyama2"          
[17] "ForeliuspruinosisSheephole"         "LeptothoraxSheephole"              
[19] "LeptothoraxYucca"                   "MessorpergandeiBarstow"            
[21] "MessorpergandeiCuyama1"             "MessorpergandeiCuyama2"            
[23] "MessorpergandeiHOM"                 "MessorpergandeiTecopa"             
[25] "Monomoriumergotyna/minimaSheephole" "Monomoriumergotyna/minimaTecopa"   
[27] "MyrmecocystusewartiSheephole"       "MyrmecocystusflavicepsSheephole"   
[29] "MyrmecocystusflavicepsYucca"        "MyrmecocystuskennedyiBarstow"      
[31] "MyrmecocystuskennedyiCuyama1"       "MyrmecocystuskennedyiCuyama2"      
[33] "MyrmecocystuskennedyiHOM"           "MyrmecocystuslugubrisHOM"          
[35] "MyrmecocystusmexicanusCuyama2"      "MyrmecocystusmexicanusHOM"         
[37] "MyrmecocystusmexicanusYucca"        "MyrmecocystussemirufusTecopa"      
[39] "MyrmecocystustenuinodisTecopa"      "MyrmecocystustestaceusCuyama1"     
[41] "MyrmecocystusyumaSheephole"         "PheidoledesertorumYucca"           
[43] "PheidolehyattiCuyama1"              "PheidolehyattiCuyama2"             
[45] "PheidolehyattiHOM"                  "PheidolevistanaSheephole"          
[47] "PogonomyrmexcalifornicusSheephole"  "PogonomyrmexcalifornicusTecopa"    
[49] "PogonomyrmexCuyama2"                "PogonomyrmexrugususYucca"          
[51] "SolenopsismolestaCuyama1"           "SolenopsismolestaCuyama2"          
[53] "SolenopsisxyloniBarstow"            "SolenopsisxyloniCuyama1"           
[55] "SolenopsisxyloniCuyama2"            "SolenopsisxyloniHOM"               
[57] "SolenopsisxyloniSheephole"          "SolenopsisxyloniTecopa"            
[59] "SolenopsisxyloniYucca"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">colnames</span>(df), <span class="fu">row.names</span>(atraits))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">row.names</span>(atraits), <span class="fu">colnames</span>(tr_wide))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>ck <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">row.names</span>(atraits), <span class="fu">colnames</span>(df))</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(atraits) <span class="sc">==</span> <span class="fu">colnames</span>(tr_wide)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tr_wide) <span class="sc">==</span> <span class="fu">rownames</span>(atraits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">59</span>)</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>names2 <span class="ot">&lt;-</span> <span class="fu">colnames</span>(tr_wide)</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(names, names2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(atraits) <span class="ot">&lt;-</span> names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(tr_wide) <span class="ot">&lt;-</span> names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `value` argument of `names&lt;-` must be a character vector as of tibble
3.0.0.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(names, names2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
[51] 51 52 53 54 55 56 57 58 59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co">#set them to numbers</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>func.ants.site <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(atraits, tr_wide, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in is.euclid(x.dist): Zero distance(s)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: To respect s &gt; t, FRic could not be calculated for communities with &lt;3 functionally singular species. 
FRic: No dimensionality reduction was required. The 2 PCoA axes were kept as 'traits'. 
FDiv: Could not be calculated for communities with &lt;3 functionally singular species. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a>cwm.ants <span class="ot">&lt;-</span> func.ants.site<span class="sc">$</span>CWM</span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>cwm.ants <span class="ot">&lt;-</span> <span class="fu">cbind</span>(tr.names, cwm.ants)</span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true" tabindex="-1"></a>cwm.ants<span class="sc">$</span>tr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama 1"</span>, <span class="st">"Cuyama1"</span>, cwm.ants<span class="sc">$</span>tr.names)</span>
<span id="cb196-11"><a href="#cb196-11" aria-hidden="true" tabindex="-1"></a>cwm.ants<span class="sc">$</span>tr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama 2"</span>, <span class="st">"Cuyama2"</span>, cwm.ants<span class="sc">$</span>tr.names)</span>
<span id="cb196-12"><a href="#cb196-12" aria-hidden="true" tabindex="-1"></a>cwm.ants <span class="ot">&lt;-</span> <span class="fu">separate</span>(cwm.ants, <span class="at">col =</span> <span class="dv">1</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"season"</span>, <span class="st">"Site"</span>), <span class="at">sep =</span> <span class="st">" "</span>)</span>
<span id="cb196-13"><a href="#cb196-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-14"><a href="#cb196-14" aria-hidden="true" tabindex="-1"></a>cwm.ants<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama1"</span>, <span class="st">"Cuyama 1"</span>, cwm.ants<span class="sc">$</span>Site)</span>
<span id="cb196-15"><a href="#cb196-15" aria-hidden="true" tabindex="-1"></a>cwm.ants<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama2"</span>, <span class="st">"Cuyama 2"</span>, cwm.ants<span class="sc">$</span>Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>#Site level Granv CWM</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co">#need to filter out species to just the granivores</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>gtraits <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Raw Data/anttraits.csv"</span>)</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>gtraits <span class="ot">&lt;-</span> <span class="fu">mutate</span>(gtraits, <span class="at">r.mand =</span> mandible<span class="sc">/</span>webers)</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>gtraits <span class="ot">&lt;-</span> gtraits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(site, ant.species) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">r.mand =</span> <span class="fu">mean</span>(r.mand), <span class="at">webers =</span> <span class="fu">mean</span>(webers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'site'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>gtraits<span class="sc">$</span>species.site <span class="ot">&lt;-</span> <span class="fu">paste</span>(gtraits<span class="sc">$</span>ant.species, gtraits<span class="sc">$</span>site)</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>gtraits <span class="ot">&lt;-</span> <span class="fu">filter</span>(gtraits, ant.species <span class="sc">%in%</span> sp)</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>gtraits <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(gtraits) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a><span class="co">#need the number of good pitfalls, per site, per visit</span></span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a>rps <span class="ot">&lt;-</span> ptsreps <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year, Site, season) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">pit.count =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year', 'Site'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reorder ants data</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>tr <span class="ot">&lt;-</span> <span class="fu">filter</span>(ants, Species <span class="sc">%in%</span> sp)</span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> tr</span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-7"><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-8"><a href="#cb201-8" aria-hidden="true" tabindex="-1"></a>gr_wide<span class="sc">$</span>species.site <span class="ot">&lt;-</span> <span class="fu">paste</span>(gr_wide<span class="sc">$</span>Species, gr_wide<span class="sc">$</span>Site)</span>
<span id="cb201-9"><a href="#cb201-9" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> gr_wide <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pres =</span> <span class="fu">ifelse</span>(abun <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb201-10"><a href="#cb201-10" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(gr_wide, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb201-11"><a href="#cb201-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-12"><a href="#cb201-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-13"><a href="#cb201-13" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> gr_wide <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Year, Site, Season, species.site) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">site.total =</span> <span class="fu">sum</span>(pres))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Year', 'Site', 'Season'. You can override
using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>rps<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(rps<span class="sc">$</span>year)</span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>gr_wide<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(gr_wide<span class="sc">$</span>Year)</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> <span class="fu">left_join</span>(gr_wide, rps, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"year"</span>, <span class="st">"Site"</span>, <span class="st">"Season"</span> <span class="ot">=</span> <span class="st">"season"</span>))</span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> <span class="fu">mutate</span>(gr_wide, <span class="at">occ =</span> site.total<span class="sc">/</span>pit.count)</span>
<span id="cb203-6"><a href="#cb203-6" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> <span class="fu">select</span>(gr_wide, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>)</span>
<span id="cb203-7"><a href="#cb203-7" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(gr_wide, <span class="at">names_from =</span> species.site, <span class="at">values_from =</span> occ)</span>
<span id="cb203-8"><a href="#cb203-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-9"><a href="#cb203-9" aria-hidden="true" tabindex="-1"></a>gr_wide[<span class="fu">is.na</span>(gr_wide)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb203-10"><a href="#cb203-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-11"><a href="#cb203-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-12"><a href="#cb203-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-13"><a href="#cb203-13" aria-hidden="true" tabindex="-1"></a>gr_wide<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="fu">paste</span>(gr_wide<span class="sc">$</span>Year, gr_wide<span class="sc">$</span>Season, gr_wide<span class="sc">$</span>Site)</span>
<span id="cb203-14"><a href="#cb203-14" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> gr_wide <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">41</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">40</span>)</span>
<span id="cb203-15"><a href="#cb203-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-16"><a href="#cb203-16" aria-hidden="true" tabindex="-1"></a><span class="co">#make a vector of the row names and remove the first value</span></span>
<span id="cb203-17"><a href="#cb203-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-18"><a href="#cb203-18" aria-hidden="true" tabindex="-1"></a>tr.names <span class="ot">&lt;-</span> gr_wide<span class="sc">$</span>ID</span>
<span id="cb203-19"><a href="#cb203-19" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> gr_wide[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb203-20"><a href="#cb203-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-21"><a href="#cb203-21" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(gr_wide) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, <span class="fu">names</span>(gr_wide))</span>
<span id="cb203-22"><a href="#cb203-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-23"><a href="#cb203-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-24"><a href="#cb203-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-25"><a href="#cb203-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-26"><a href="#cb203-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-27"><a href="#cb203-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-28"><a href="#cb203-28" aria-hidden="true" tabindex="-1"></a>gtraits <span class="ot">&lt;-</span> gtraits[<span class="fu">order</span>(gtraits<span class="sc">$</span>species.site),]</span>
<span id="cb203-29"><a href="#cb203-29" aria-hidden="true" tabindex="-1"></a>gr_wide <span class="ot">&lt;-</span> gr_wide[,<span class="fu">order</span>(<span class="fu">names</span>(gr_wide))]</span>
<span id="cb203-30"><a href="#cb203-30" aria-hidden="true" tabindex="-1"></a><span class="co">#gr_wide &lt;- select(gr_wide, -LeptothoraxHOM)</span></span>
<span id="cb203-31"><a href="#cb203-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-32"><a href="#cb203-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-33"><a href="#cb203-33" aria-hidden="true" tabindex="-1"></a>atr.names <span class="ot">&lt;-</span> gtraits<span class="sc">$</span>species.site</span>
<span id="cb203-34"><a href="#cb203-34" aria-hidden="true" tabindex="-1"></a>atr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, atr.names)</span>
<span id="cb203-35"><a href="#cb203-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-36"><a href="#cb203-36" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(gtraits) <span class="ot">&lt;-</span> atr.names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(gtraits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "AphaenogastermegommataHOM"         "AphaenogastermegommataSheephole"  
 [3] "AphaenogastermegommataTecopa"      "DorymyrmexinsanusBarstow"         
 [5] "DorymyrmexinsanusCuyama2"          "DorymyrmexinsanusHOM"             
 [7] "DorymyrmexinsanusSheephole"        "DorymyrmexinsanusTecopa"          
 [9] "DorymyrmexinsanusYucca"            "ForeliusmccookiBarstow"           
[11] "ForeliusmccookiYucca"              "ForeliuspruinosisCuyama1"         
[13] "ForeliuspruinosisCuyama2"          "ForeliuspruinosisSheephole"       
[15] "MessorpergandeiBarstow"            "MessorpergandeiCuyama1"           
[17] "MessorpergandeiCuyama2"            "MessorpergandeiHOM"               
[19] "MessorpergandeiTecopa"             "PheidoledesertorumYucca"          
[21] "PheidolehyattiCuyama1"             "PheidolehyattiCuyama2"            
[23] "PheidolehyattiHOM"                 "PheidolevistanaSheephole"         
[25] "PogonomyrmexcalifornicusSheephole" "PogonomyrmexcalifornicusTecopa"   
[27] "PogonomyrmexCuyama2"               "PogonomyrmexrugususYucca"         
[29] "SolenopsismolestaCuyama1"          "SolenopsismolestaCuyama2"         
[31] "SolenopsisxyloniBarstow"           "SolenopsisxyloniCuyama1"          
[33] "SolenopsisxyloniCuyama2"           "SolenopsisxyloniHOM"              
[35] "SolenopsisxyloniSheephole"         "SolenopsisxyloniTecopa"           
[37] "SolenopsisxyloniYucca"            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(gr_wide)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "AphaenogastermegommataHOM"         "AphaenogastermegommataSheephole"  
 [3] "AphaenogastermegommataTecopa"      "DorymyrmexinsanusBarstow"         
 [5] "DorymyrmexinsanusCuyama2"          "DorymyrmexinsanusHOM"             
 [7] "DorymyrmexinsanusSheephole"        "DorymyrmexinsanusTecopa"          
 [9] "DorymyrmexinsanusYucca"            "ForeliusmccookiBarstow"           
[11] "ForeliusmccookiYucca"              "ForeliuspruinosisCuyama1"         
[13] "ForeliuspruinosisCuyama2"          "ForeliuspruinosisSheephole"       
[15] "MessorpergandeiBarstow"            "MessorpergandeiCuyama1"           
[17] "MessorpergandeiCuyama2"            "MessorpergandeiHOM"               
[19] "MessorpergandeiTecopa"             "PheidoledesertorumYucca"          
[21] "PheidolehyattiCuyama1"             "PheidolehyattiCuyama2"            
[23] "PheidolehyattiHOM"                 "PheidolevistanaSheephole"         
[25] "PogonomyrmexcalifornicusSheephole" "PogonomyrmexcalifornicusTecopa"   
[27] "PogonomyrmexCuyama2"               "PogonomyrmexrugususYucca"         
[29] "SolenopsismolestaCuyama1"          "SolenopsismolestaCuyama2"         
[31] "SolenopsisxyloniBarstow"           "SolenopsisxyloniCuyama1"          
[33] "SolenopsisxyloniCuyama2"           "SolenopsisxyloniHOM"              
[35] "SolenopsisxyloniSheephole"         "SolenopsisxyloniTecopa"           
[37] "SolenopsisxyloniYucca"            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>gtraits <span class="ot">&lt;-</span> gtraits[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">row.names</span>(gtraits), <span class="fu">colnames</span>(gr_wide))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">37</span>)</span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(gtraits) <span class="ot">&lt;-</span> names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Setting row names on a tibble is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(gr_wide) <span class="ot">&lt;-</span> names</span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a><span class="co">#set them to numbers</span></span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a>func.gran.site <span class="ot">&lt;-</span> <span class="fu">dbFD</span>(gtraits, gr_wide, <span class="at">w.abun =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FEVe: Could not be calculated for communities with &lt;3 functionally singular species. 
FDis: Equals 0 in communities with only one functionally singular species. 
FRic: To respect s &gt; t, FRic could not be calculated for communities with &lt;3 functionally singular species. 
FRic: No dimensionality reduction was required. The 2 PCoA axes were kept as 'traits'. 
FDiv: Could not be calculated for communities with &lt;3 functionally singular species. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>cwm.gran.sites <span class="ot">&lt;-</span> func.gran.site<span class="sc">$</span>CWM</span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a>cwm.gran.sites <span class="ot">&lt;-</span> <span class="fu">cbind</span>(tr.names, cwm.gran.sites)</span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a><span class="co">#cwm.gran.sites &lt;- cwm.gran.sites[,-2]</span></span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a>cwm.gran.sites<span class="sc">$</span>tr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama 1"</span>, <span class="st">"Cuyama1"</span>, cwm.gran.sites<span class="sc">$</span>tr.names)</span>
<span id="cb215-6"><a href="#cb215-6" aria-hidden="true" tabindex="-1"></a>cwm.gran.sites<span class="sc">$</span>tr.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama 2"</span>, <span class="st">"Cuyama2"</span>, cwm.gran.sites<span class="sc">$</span>tr.names)</span>
<span id="cb215-7"><a href="#cb215-7" aria-hidden="true" tabindex="-1"></a>cwm.gran.sites <span class="ot">&lt;-</span> <span class="fu">separate</span>(cwm.gran.sites, <span class="at">col =</span> <span class="dv">1</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"season"</span>, <span class="st">"Site"</span>), <span class="at">sep =</span> <span class="st">" "</span>)</span>
<span id="cb215-8"><a href="#cb215-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-9"><a href="#cb215-9" aria-hidden="true" tabindex="-1"></a>cwm.gran.sites<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama1"</span>, <span class="st">"Cuyama 1"</span>, cwm.gran.sites<span class="sc">$</span>Site)</span>
<span id="cb215-10"><a href="#cb215-10" aria-hidden="true" tabindex="-1"></a>cwm.gran.sites<span class="sc">$</span>Site <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Cuyama2"</span>, <span class="st">"Cuyama 2"</span>, cwm.gran.sites<span class="sc">$</span>Site)</span>
<span id="cb215-11"><a href="#cb215-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-12"><a href="#cb215-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-13"><a href="#cb215-13" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cwm.ants<span class="sc">$</span>webers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.178508</code></pre>
</div>
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cwm.gran.sites<span class="sc">$</span>webers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.190231</code></pre>
</div>
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(cwm.ants<span class="sc">$</span>webers, cwm.gran.sites<span class="sc">$</span>webers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
<section id="mean-ant" class="level1">
<h1>Mean ant</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> sites <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">arid =</span> MAP<span class="sc">/</span>(MAT <span class="sc">+</span> <span class="dv">10</span>))</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>sites<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(sites<span class="sc">$</span>Year)</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, sites, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span>))</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, precip, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span>))</span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-9"><a href="#cb221-9" aria-hidden="true" tabindex="-1"></a><span class="co">#combine pits into means for adding to the dispersal models</span></span>
<span id="cb221-10"><a href="#cb221-10" aria-hidden="true" tabindex="-1"></a>mn.ants <span class="ot">&lt;-</span> ptsreps <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Site, season, year) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mn.abun.ants =</span> <span class="fu">mean</span>(abun), <span class="at">mn.rich.ants =</span> <span class="fu">mean</span>(rich), <span class="at">mn.gr.abun =</span> <span class="fu">mean</span>(gr.abun), <span class="at">mn.gr.rich =</span> <span class="fu">mean</span>(gr.richness))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Site', 'season'. You can override using
the `.groups` argument.</code></pre>
</div>
</div>
</section>
<section id="combine-the-datasets" class="level1">
<h1>Combine the datasets</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.ag is the main plant dataset</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, <span class="fu">filter</span>(cwm.ants, season <span class="sc">==</span> <span class="st">"spring"</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"year"</span>))</span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">left_join</span>(plt.ag, <span class="fu">filter</span>(cwm.gran.sites, season <span class="sc">==</span> <span class="st">"spring"</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"year"</span>))</span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a>plt.ag <span class="ot">&lt;-</span> <span class="fu">rename</span>(plt.ag, <span class="at">gr.webers =</span> webers.y, <span class="at">gr.rmand =</span> r.mand.y)</span>
<span id="cb223-9"><a href="#cb223-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-10"><a href="#cb223-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-11"><a href="#cb223-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-12"><a href="#cb223-12" aria-hidden="true" tabindex="-1"></a><span class="do">##joining up the pitfall trap data</span></span>
<span id="cb223-13"><a href="#cb223-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-14"><a href="#cb223-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-15"><a href="#cb223-15" aria-hidden="true" tabindex="-1"></a>ptsreps <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ptsreps, cwmants, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"Site"</span>, <span class="st">"season"</span>, <span class="st">"Microsite"</span>, <span class="st">"Rep"</span>))</span>
<span id="cb223-16"><a href="#cb223-16" aria-hidden="true" tabindex="-1"></a>ptsreps <span class="ot">&lt;-</span> <span class="fu">select</span>(ptsreps, <span class="sc">-</span>X, <span class="sc">-</span>Season, shrub.species)</span>
<span id="cb223-17"><a href="#cb223-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-18"><a href="#cb223-18" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ptsreps, mn.plt, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span> <span class="ot">=</span> <span class="st">"Year"</span>, <span class="st">"Site"</span>))</span>
<span id="cb223-19"><a href="#cb223-19" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(pts, cwmgran, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"Site"</span>, <span class="st">"season"</span>, <span class="st">"Microsite"</span>, <span class="st">"Rep"</span>))</span>
<span id="cb223-20"><a href="#cb223-20" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> <span class="fu">rename</span>(pts, <span class="at">gr.webers =</span> webers.y, <span class="at">gr.rmand =</span> r.mand.y)</span>
<span id="cb223-21"><a href="#cb223-21" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> pts <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">arid =</span> MAP<span class="sc">/</span>(MAT <span class="sc">+</span> <span class="dv">10</span>))</span>
<span id="cb223-22"><a href="#cb223-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-23"><a href="#cb223-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-24"><a href="#cb223-24" aria-hidden="true" tabindex="-1"></a><span class="co">#join plant data</span></span>
<span id="cb223-25"><a href="#cb223-25" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">select</span>(seeds, <span class="sc">-</span>Season)</span>
<span id="cb223-26"><a href="#cb223-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-27"><a href="#cb223-27" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">left_join</span>(seeds, mn.plt, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Year"</span>))</span>
<span id="cb223-28"><a href="#cb223-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-29"><a href="#cb223-29" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Visit <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Spring"</span>, <span class="st">"spring"</span>, seeds<span class="sc">$</span>Visit)</span>
<span id="cb223-30"><a href="#cb223-30" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Visit <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Summer"</span>, <span class="st">"summer"</span>, seeds<span class="sc">$</span>Visit)</span>
<span id="cb223-31"><a href="#cb223-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-32"><a href="#cb223-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-33"><a href="#cb223-33" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">left_join</span>(seeds, cwm.ants, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"year"</span>, <span class="st">"Visit"</span> <span class="ot">=</span> <span class="st">"season"</span>, <span class="st">"Site"</span>))</span>
<span id="cb223-34"><a href="#cb223-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-35"><a href="#cb223-35" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">left_join</span>(seeds, cwm.gran.sites, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"year"</span>, <span class="st">"Visit"</span> <span class="ot">=</span> <span class="st">"season"</span>, <span class="st">"Site"</span>))</span>
<span id="cb223-36"><a href="#cb223-36" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">rename</span>(seeds, <span class="at">gr.webers =</span> webers.y, <span class="at">gr.rmand =</span> r.mand.y)</span>
<span id="cb223-37"><a href="#cb223-37" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> seeds <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">arid =</span> MAP<span class="sc">/</span>(MAT <span class="sc">+</span> <span class="dv">10</span>))</span>
<span id="cb223-38"><a href="#cb223-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-39"><a href="#cb223-39" aria-hidden="true" tabindex="-1"></a><span class="co">#add mean ant abuns</span></span>
<span id="cb223-40"><a href="#cb223-40" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> seeds <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(mn.ants, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"Visit"</span><span class="ot">=</span> <span class="st">"season"</span>,<span class="st">"Year"</span>  <span class="ot">=</span><span class="st">"year"</span>))</span>
<span id="cb223-41"><a href="#cb223-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-42"><a href="#cb223-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-43"><a href="#cb223-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-44"><a href="#cb223-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-45"><a href="#cb223-45" aria-hidden="true" tabindex="-1"></a><span class="co">#all site level data in one dataframe</span></span>
<span id="cb223-46"><a href="#cb223-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-47"><a href="#cb223-47" aria-hidden="true" tabindex="-1"></a>site.env <span class="ot">&lt;-</span> pts <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>, <span class="dv">13</span><span class="sc">:</span><span class="dv">17</span>, <span class="dv">20</span><span class="sc">:</span><span class="dv">26</span>, <span class="dv">29</span>)</span>
<span id="cb223-48"><a href="#cb223-48" aria-hidden="true" tabindex="-1"></a>site.env <span class="ot">&lt;-</span> <span class="fu">unique</span>(site.env)</span>
<span id="cb223-49"><a href="#cb223-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-50"><a href="#cb223-50" aria-hidden="true" tabindex="-1"></a>site.env <span class="ot">&lt;-</span> <span class="fu">left_join</span>(site.env, cwm.ants, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"season"</span>, <span class="st">"Site"</span>))</span>
<span id="cb223-51"><a href="#cb223-51" aria-hidden="true" tabindex="-1"></a>site.env <span class="ot">&lt;-</span> <span class="fu">left_join</span>(site.env, cwm.gran.sites, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"season"</span>, <span class="st">"Site"</span>))</span>
<span id="cb223-52"><a href="#cb223-52" aria-hidden="true" tabindex="-1"></a>site.env <span class="ot">&lt;-</span> <span class="fu">rename</span>(site.env, <span class="at">gr.webers =</span> webers.y, <span class="at">gr.rmand =</span> r.mand.y)</span>
<span id="cb223-53"><a href="#cb223-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-54"><a href="#cb223-54" aria-hidden="true" tabindex="-1"></a>site.env <span class="ot">&lt;-</span> <span class="fu">left_join</span>(site.env, mn.ants, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Site"</span>, <span class="st">"season"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>#Heat map for site</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>corrplot 0.92 loaded</code></pre>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>M <span class="ot">&lt;-</span> <span class="fu">select</span>(site.env, <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">8</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>M <span class="ot">=</span> <span class="fu">cor</span>(M)</span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(M, <span class="at">method =</span> <span class="st">"color"</span>, <span class="at">addCoef.col =</span> <span class="st">'black'</span>, <span class="at">tl.cex =</span> <span class="fl">0.75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="fu">select</span>(site.env, <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">8</span><span class="sc">:</span><span class="dv">24</span>)</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(N)</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="fu">cor</span>(N)</span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(N, <span class="at">method =</span> <span class="st">"color"</span>, <span class="at">addCoef.col =</span> <span class="st">'black'</span>, <span class="at">tl.cex =</span> <span class="fl">0.75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(site.env, <span class="fu">aes</span>(arid, mn.abun.ants)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-14-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(prov, prov) <span class="sc">%&gt;%</span> <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
# Groups:   prov [3]
  prov           n
  &lt;chr&gt;      &lt;int&gt;
1 ""             3
2 "invasive"     9
3 "native"      73</code></pre>
</div>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(prov.ag<span class="sc">$</span>invasive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25926</code></pre>
</div>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(prov.ag<span class="sc">$</span>native)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24088</code></pre>
</div>
</div>
<section id="plant-models" class="level2">
<h2 class="anchored" data-anchor-id="plant-models">Plant Models</h2>
<section id="annual-richness" class="level3">
<h3 class="anchored" data-anchor-id="annual-richness">Annual Richness</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>m11 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(rich <span class="sc">~</span>  arid <span class="sc">+</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year), <span class="at">family =</span> <span class="st">"poisson"</span>, plt.ag)</span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          rich ~ arid + Microsite.x + (1 | Site) + (1 | Year)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  3535.1   3559.5  -1762.5   3525.1      975 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.017523 0.13237 
 Year   (Intercept) 0.009622 0.09809 
Number of obs: 980, groups:  Site, 7; Year, 2

Conditional model:
                  Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)       0.707809   0.112579   6.287 3.23e-10 ***
arid              0.034179   0.007922   4.314 1.60e-05 ***
Microsite.xshrub -0.049220   0.038339  -1.284    0.199    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co">#adding a random effect for year doesn't improve</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(rich <span class="sc">~</span>  arid <span class="sc">+</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year), <span class="at">family =</span> <span class="fu">poisson</span>(), plt.ag)</span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co">#adding ndvi does not improve</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(rich <span class="sc">~</span>  arid <span class="sc">*</span> Microsite.x <span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="fu">poisson</span>(), plt.ag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          rich ~ arid * Microsite.x + ndvi + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  3523.3   3552.6  -1755.6   3511.3      974 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.01551  0.1245  
Number of obs: 980, groups:  Site, 7

Conditional model:
                        Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)            5.722e-01  9.909e-02   5.775 7.68e-09 ***
arid                   4.811e-02  1.053e-02   4.569 4.89e-06 ***
Microsite.xshrub       2.510e-01  6.617e-02   3.793 0.000149 ***
ndvi                   2.254e-06  3.867e-05   0.058 0.953519    
arid:Microsite.xshrub -2.996e-02  5.386e-03  -5.563 2.66e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m1, m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   df      AIC
m1  5 3535.068
m2  6 3523.276</code></pre>
</div>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co">#adding the interaction does improve a lot</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>m1.int <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(rich <span class="sc">~</span>  arid <span class="sc">*</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, plt.ag)</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m1.int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          rich ~ arid * Microsite.x + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  3521.3   3545.7  -1755.6   3511.3      975 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.01573  0.1254  
Number of obs: 980, groups:  Site, 7

Conditional model:
                       Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)            0.574745   0.089775   6.402 1.53e-10 ***
arid                   0.048512   0.007976   6.082 1.18e-09 ***
Microsite.xshrub       0.250988   0.066166   3.793 0.000149 ***
arid:Microsite.xshrub -0.029961   0.005386  -5.563 2.66e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>m1.int2 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(rich <span class="sc">~</span>  arid <span class="sc">*</span> Microsite.x <span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, plt.ag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m1.int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          rich ~ arid * Microsite.x + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  3521.3   3545.7  -1755.6   3511.3      975 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.01573  0.1254  
Number of obs: 980, groups:  Site, 7

Conditional model:
                       Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)            0.574745   0.089775   6.402 1.53e-10 ***
arid                   0.048512   0.007976   6.082 1.18e-09 ***
Microsite.xshrub       0.250988   0.066166   3.793 0.000149 ***
arid:Microsite.xshrub -0.029961   0.005386  -5.563 2.66e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m1.int, m1.int2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        df      AIC
m1.int   5 3521.280
m1.int2  6 3523.276</code></pre>
</div>
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(m1.int, m1.int2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        df      BIC
m1.int   5 3545.717
m1.int2  6 3552.602</code></pre>
</div>
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m1.int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          rich ~ arid * Microsite.x + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  3521.3   3545.7  -1755.6   3511.3      975 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.01573  0.1254  
Number of obs: 980, groups:  Site, 7

Conditional model:
                       Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)            0.574745   0.089775   6.402 1.53e-10 ***
arid                   0.048512   0.007976   6.082 1.18e-09 ***
Microsite.xshrub       0.250988   0.066166   3.793 0.000149 ***
arid:Microsite.xshrub -0.029961   0.005386  -5.563 2.66e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m1.int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: rich
                   Chisq Df Pr(&gt;Chisq)    
arid             20.6966  1  5.381e-06 ***
Microsite.x       1.5567  1     0.2121    
arid:Microsite.x 30.9427  1  2.658e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a>em <span class="ot">&lt;-</span> <span class="fu">emtrends</span>(m1.int, <span class="st">"Microsite.x"</span>, <span class="at">var =</span> <span class="st">"arid"</span>)</span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contrast     estimate      SE  df z.ratio p.value
 open - shrub     0.03 0.00539 Inf   5.563  &lt;.0001</code></pre>
</div>
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x arid.trend      SE  df asymp.LCL asymp.UCL
 open            0.0485 0.00798 Inf   0.03288    0.0641
 shrub           0.0186 0.00808 Inf   0.00271    0.0344

Confidence level used: 0.95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x arid.trend      SE  df z.ratio p.value
 open            0.0485 0.00798 Inf   6.082  &lt;.0001
 shrub           0.0186 0.00808 Inf   2.296  0.0217</code></pre>
</div>
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="annual-abundance" class="level3">
<h3 class="anchored" data-anchor-id="annual-abundance">Annual Abundance</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co">#annual abundance</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-3"><a href="#cb266-3" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">+</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, plt.ag)</span>
<span id="cb266-4"><a href="#cb266-4" aria-hidden="true" tabindex="-1"></a><span class="fu">check_overdispersion</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Overdispersion test

       dispersion ratio =    27.794
  Pearson's Chi-Squared = 27126.702
                p-value =   &lt; 0.001</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Overdispersion detected.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a>m2.nb <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">+</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom2"</span>, plt.ag)</span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a>m2.nb1 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">+</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, plt.ag)</span>
<span id="cb269-3"><a href="#cb269-3" aria-hidden="true" tabindex="-1"></a>m2.int <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">*</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, plt.ag)</span>
<span id="cb269-4"><a href="#cb269-4" aria-hidden="true" tabindex="-1"></a>m2.inb <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">*</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom2"</span>, plt.ag)</span>
<span id="cb269-5"><a href="#cb269-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2.nb1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: nbinom1  ( log )
Formula:          abun ~ arid + Microsite.x + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  8860.8   8885.3  -4425.4   8850.8      975 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.3546   0.5955  
Number of obs: 980, groups:  Site, 7

Dispersion parameter for nbinom1 family (): 34.5 

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)       3.11843    0.36480   8.548  &lt; 2e-16 ***
arid              0.08089    0.03391   2.386   0.0171 *  
Microsite.xshrub -0.36739    0.04941  -7.435 1.05e-13 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2.nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: nbinom2  ( log )
Formula:          abun ~ arid + Microsite.x + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  8933.0   8957.4  -4461.5   8923.0      975 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.5144   0.7172  
Number of obs: 980, groups:  Site, 7

Dispersion parameter for nbinom2 family (): 1.16 

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)       2.85761    0.44171   6.469 9.84e-11 ***
arid              0.09157    0.04126   2.219  0.02646 *  
Microsite.xshrub -0.21499    0.06662  -3.227  0.00125 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m2.nb1, m2.nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       df      AIC
m2.nb1  5 8860.839
m2.nb   5 8932.952</code></pre>
</div>
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a>m2.int <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">*</span> Microsite.x <span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, plt.ag) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2.int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: nbinom1  ( log )
Formula:          abun ~ arid * Microsite.x + ndvi + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  8688.9   8723.1  -4337.4   8674.9      973 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.4141   0.6435  
Number of obs: 980, groups:  Site, 7

Dispersion parameter for nbinom1 family (): 26.9 

Conditional model:
                        Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)            2.843e+00  3.998e-01   7.111 1.15e-12 ***
arid                   1.627e-01  3.853e-02   4.222 2.42e-05 ***
Microsite.xshrub       4.948e-01  8.415e-02   5.880 4.09e-09 ***
ndvi                  -2.284e-04  5.723e-05  -3.990 6.60e-05 ***
arid:Microsite.xshrub -7.690e-02  6.038e-03 -12.735  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this model here</span></span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true" tabindex="-1"></a>m2.int3 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">*</span> Microsite.x <span class="sc">+</span> ndvi <span class="sc">*</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, plt.ag) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a>m2.int.hp <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">:</span> Microsite.x <span class="sc">+</span> ndvi<span class="sc">:</span>  Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, plt.ag) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m2.int, m2.int3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        df      AIC
m2.int   7 8688.874
m2.int3  8 8587.392</code></pre>
</div>
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(m2.int, m2.int3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        df      BIC
m2.int   7 8723.087
m2.int3  8 8626.493</code></pre>
</div>
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">glmm.hp</span>(m2.int.hp, <span class="at">commonality =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m2.int.hp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
                R2m       R2c
delta     0.3281091 0.6445847
lognormal 0.3504380 0.6884509
trigamma  0.2995563 0.5884916

$delta
                 Unique Average.share Individual I.perc(%)
arid:Microsite.x 0.2520        0.0092     0.2612     79.61
ndvi:Microsite.x 0.0577        0.0092     0.0669     20.39

$lognormal
                 Unique Average.share Individual I.perc(%)
arid:Microsite.x 0.2690        0.0145     0.2835     80.91
ndvi:Microsite.x 0.0524        0.0145     0.0669     19.09

$trigamma
                 Unique Average.share Individual I.perc(%)
arid:Microsite.x 0.2308        0.0022     0.2330     77.77
ndvi:Microsite.x 0.0644        0.0022     0.0666     22.23

$variables
[1] "arid:Microsite.x" "ndvi:Microsite.x"

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2.int3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: nbinom1  ( log )
Formula:          abun ~ arid * Microsite.x + ndvi * Microsite.x + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  8587.4   8626.5  -4285.7   8571.4      972 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.4213   0.6491  
Number of obs: 980, groups:  Site, 7

Dispersion parameter for nbinom1 family (): 23.9 

Conditional model:
                        Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)            3.095e+00  4.033e-01   7.674 1.66e-14 ***
arid                   2.080e-01  3.816e-02   5.450 5.03e-08 ***
Microsite.xshrub      -1.753e-01  1.036e-01  -1.692   0.0907 .  
ndvi                  -4.832e-04  5.178e-05  -9.331  &lt; 2e-16 ***
arid:Microsite.xshrub -1.945e-01  1.289e-02 -15.093  &lt; 2e-16 ***
Microsite.xshrub:ndvi  6.420e-04  6.209e-05  10.340  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m2.int3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: abun
                   Chisq Df Pr(&gt;Chisq)    
arid              10.860  1  0.0009826 ***
Microsite.x       64.771  1  8.414e-16 ***
ndvi              13.348  1  0.0002588 ***
arid:Microsite.x 227.813  1  &lt; 2.2e-16 ***
Microsite.x:ndvi 106.918  1  &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a>em <span class="ot">&lt;-</span> <span class="fu">emtrends</span>(m2.int3, <span class="st">"Microsite.x"</span>, <span class="at">var =</span> <span class="st">"ndvi"</span>)</span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contrast      estimate       SE  df z.ratio p.value
 open - shrub -0.000642 6.21e-05 Inf -10.340  &lt;.0001</code></pre>
</div>
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x ndvi.trend       SE  df asymp.LCL asymp.UCL
 open         -0.000483 5.18e-05 Inf -5.85e-04 -0.000382
 shrub         0.000159 5.00e-05 Inf  6.08e-05  0.000257

Confidence level used: 0.95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x ndvi.trend       SE  df z.ratio p.value
 open         -0.000483 5.18e-05 Inf  -9.331  &lt;.0001
 shrub         0.000159 5.00e-05 Inf   3.175  0.0015</code></pre>
</div>
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a>em <span class="ot">&lt;-</span> <span class="fu">emtrends</span>(m2.int3, <span class="st">"Microsite.x"</span>, <span class="at">var =</span> <span class="st">"arid"</span>)</span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contrast     estimate     SE  df z.ratio p.value
 open - shrub    0.195 0.0129 Inf  15.093  &lt;.0001</code></pre>
</div>
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x arid.trend     SE  df asymp.LCL asymp.UCL
 open            0.2080 0.0382 Inf    0.1332    0.2828
 shrub           0.0134 0.0385 Inf   -0.0619    0.0888

Confidence level used: 0.95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x arid.trend     SE  df z.ratio p.value
 open            0.2080 0.0382 Inf   5.450  &lt;.0001
 shrub           0.0134 0.0385 Inf   0.349  0.7267</code></pre>
</div>
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-17-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m2.int, m2.int3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        df      AIC
m2.int   7 8688.874
m2.int3  8 8587.392</code></pre>
</div>
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a>m2.int2 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span>  arid <span class="sc">*</span> Microsite.x <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, plt.ag) </span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb340-3"><a href="#cb340-3" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m2.int, m2.int2, m2.int3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        df      AIC
m2.int   7 8688.874
m2.int2  6 8717.491
m2.int3  8 8587.392</code></pre>
</div>
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(m2.int, m2.int2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        df      BIC
m2.int   7 8723.087
m2.int2  6 8746.816</code></pre>
</div>
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2.int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: nbinom1  ( log )
Formula:          abun ~ arid * Microsite.x + ndvi + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  8688.9   8723.1  -4337.4   8674.9      973 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.4141   0.6435  
Number of obs: 980, groups:  Site, 7

Dispersion parameter for nbinom1 family (): 26.9 

Conditional model:
                        Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)            2.843e+00  3.998e-01   7.111 1.15e-12 ***
arid                   1.627e-01  3.853e-02   4.222 2.42e-05 ***
Microsite.xshrub       4.948e-01  8.415e-02   5.880 4.09e-09 ***
ndvi                  -2.284e-04  5.723e-05  -3.990 6.60e-05 ***
arid:Microsite.xshrub -7.690e-02  6.038e-03 -12.735  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, abun, <span class="at">fill =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-17-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(ndvi, abun, <span class="at">fill =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-17-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a>em <span class="ot">&lt;-</span> <span class="fu">emtrends</span>(m2.int2, <span class="st">"Microsite.x"</span>, <span class="at">var =</span> <span class="st">"arid"</span>)</span>
<span id="cb350-2"><a href="#cb350-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contrast     estimate      SE  df z.ratio p.value
 open - shrub   0.0751 0.00617 Inf  12.177  &lt;.0001</code></pre>
</div>
<div class="sourceCode cell-code" id="cb352"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x arid.trend     SE  df asymp.LCL asymp.UCL
 open            0.1187 0.0346 Inf    0.0509     0.187
 shrub           0.0436 0.0346 Inf   -0.0242     0.111

Confidence level used: 0.95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb354"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x arid.trend     SE  df z.ratio p.value
 open            0.1187 0.0346 Inf   3.430  0.0006
 shrub           0.0436 0.0346 Inf   1.260  0.2076</code></pre>
</div>
<div class="sourceCode cell-code" id="cb356"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-17-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="seed-size" class="level3">
<h3 class="anchored" data-anchor-id="seed-size">Seed size</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(seed.weight, cwm.inv)) <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb360"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(seed.weight, nat.cwm)) <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(seed.weight, nat.cwm)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb366"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(cwm.inv, nat.cwm)) <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 406 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(cwm.inv, nat.cwm)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 406 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(plt.ag<span class="sc">$</span>seed.weight, plt.ag<span class="sc">$</span>nat.cwm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  plt.ag$seed.weight and plt.ag$nat.cwm
t = 6.8026, df = 692, p-value = 2.226e-11
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.1792766 0.3188408
sample estimates:
      cor 
0.2503589 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(plt.ag<span class="sc">$</span>seed.weight, plt.ag<span class="sc">$</span>cwm.inv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  plt.ag$seed.weight and plt.ag$cwm.inv
t = 57.306, df = 770, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.8857233 0.9126362
sample estimates:
      cor 
0.9000343 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(plt.ag<span class="sc">$</span>native, plt.ag<span class="sc">$</span>invasive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  plt.ag$native and plt.ag$invasive
t = -0.9123, df = 1427.9, p-value = 0.3618
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -5.908244  2.157224
sample estimates:
mean of x mean of y 
 24.57959  26.45510 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="co">#native seed weights</span></span>
<span id="cb378-2"><a href="#cb378-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, <span class="fu">log</span>(nat.cwm), <span class="at">fill =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb381"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true" tabindex="-1"></a>m6 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(<span class="fu">log</span>(nat.cwm) <span class="sc">~</span> arid <span class="sc">+</span> Microsite.x  <span class="sc">+</span> gr.webers <span class="sc">+</span> gr.rmand <span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), plt.ag)</span>
<span id="cb381-2"><a href="#cb381-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
log(nat.cwm) ~ arid + Microsite.x + gr.webers + gr.rmand + ndvi +  
    (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  1571.1   1607.5   -777.6   1555.1      686 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.06213  0.2493  
 Residual             0.53670  0.7326  
Number of obs: 694, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.537 

Conditional model:
                   Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)       1.891e-01  7.283e-01   0.260   0.7951    
arid             -1.101e-01  2.048e-02  -5.376 7.63e-08 ***
Microsite.xshrub  4.728e-01  5.665e-02   8.346  &lt; 2e-16 ***
gr.webers        -2.085e-01  3.004e-01  -0.694   0.4877    
gr.rmand         -1.316e+00  1.538e+00  -0.856   0.3923    
ndvi              9.826e-05  5.746e-05   1.710   0.0873 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb383"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a>m7 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(<span class="fu">log</span>(nat.cwm) <span class="sc">~</span> arid <span class="sc">+</span> Microsite.x  <span class="sc">+</span> gr.webers <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), plt.ag)</span>
<span id="cb383-2"><a href="#cb383-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          log(nat.cwm) ~ arid + Microsite.x + gr.webers + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  1571.0   1598.3   -779.5   1559.0      688 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.05416  0.2327  
 Residual             0.54043  0.7351  
Number of obs: 694, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.54 

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)      -0.11380    0.46123  -0.247    0.805    
arid             -0.09667    0.01689  -5.724 1.04e-08 ***
Microsite.xshrub  0.47266    0.05683   8.318  &lt; 2e-16 ***
gr.webers        -0.29764    0.29298  -1.016    0.310    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: log(nat.cwm)
             Chisq Df Pr(&gt;Chisq)    
arid        32.760  1  1.043e-08 ***
Microsite.x 69.185  1  &lt; 2.2e-16 ***
gr.webers    1.032  1     0.3097    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a>m8 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(<span class="fu">log</span>(nat.cwm) <span class="sc">~</span> Microsite.x  <span class="sc">+</span> arid <span class="sc">+</span> gr.webers <span class="sc">+</span> gr.rmand <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), plt.ag)</span>
<span id="cb387-2"><a href="#cb387-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
log(nat.cwm) ~ Microsite.x + arid + gr.webers + gr.rmand + (1 |      Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  1572.1   1603.9   -779.0   1558.1      687 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.0548   0.2341  
 Residual             0.5396   0.7346  
Number of obs: 694, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.54 

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)       0.41824    0.71580   0.584    0.559    
Microsite.xshrub  0.47156    0.05680   8.303  &lt; 2e-16 ***
arid             -0.09330    0.01734  -5.381 7.43e-08 ***
gr.webers        -0.24106    0.30055  -0.802    0.423    
gr.rmand         -1.48175    1.52860  -0.969    0.332    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb389"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: log(nat.cwm)
              Chisq Df Pr(&gt;Chisq)    
Microsite.x 68.9330  1  &lt; 2.2e-16 ***
arid        28.9498  1  7.428e-08 ***
gr.webers    0.6433  1     0.4225    
gr.rmand     0.9396  1     0.3324    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb391"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m6, m7, m8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   df      AIC
m6  8 1571.145
m7  6 1571.029
m8  7 1572.088</code></pre>
</div>
<div class="sourceCode cell-code" id="cb393"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(m6, m7, m8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   df      BIC
m6  8 1607.485
m7  6 1598.283
m8  7 1603.885</code></pre>
</div>
<div class="sourceCode cell-code" id="cb395"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb395-1"><a href="#cb395-1" aria-hidden="true" tabindex="-1"></a>em <span class="ot">&lt;-</span> <span class="fu">emtrends</span>(m8, <span class="st">"Microsite.x"</span>, <span class="at">var =</span> <span class="st">"arid"</span>)</span>
<span id="cb395-2"><a href="#cb395-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contrast     estimate SE  df t.ratio p.value
 open - shrub        0  0 687     NaN     NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb397"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x arid.trend     SE  df lower.CL upper.CL
 open           -0.0933 0.0173 687   -0.127  -0.0593
 shrub          -0.0933 0.0173 687   -0.127  -0.0593

Confidence level used: 0.95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb399"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite.x arid.trend     SE  df t.ratio p.value
 open           -0.0933 0.0173 687  -5.381  &lt;.0001
 shrub          -0.0933 0.0173 687  -5.381  &lt;.0001</code></pre>
</div>
<div class="sourceCode cell-code" id="cb401"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb402"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co">#invasives</span></span>
<span id="cb402-2"><a href="#cb402-2" aria-hidden="true" tabindex="-1"></a>m8 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(<span class="fu">log</span>(cwm.inv) <span class="sc">~</span> arid <span class="sc">+</span> Microsite.x  <span class="sc">+</span> gr.webers <span class="sc">+</span> gr.rmand <span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), plt.ag)</span>
<span id="cb402-3"><a href="#cb402-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
log(cwm.inv) ~ arid + Microsite.x + gr.webers + gr.rmand + ndvi +  
    (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  1604.0   1641.2   -794.0   1588.0      764 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.9005   0.9490  
 Residual             0.4373   0.6613  
Number of obs: 772, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.437 

Conditional model:
                   Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)      -3.557e+00  8.078e-01  -4.404 1.06e-05 ***
arid              2.395e-01  5.546e-02   4.319 1.57e-05 ***
Microsite.xshrub  3.733e-01  4.775e-02   7.819 5.34e-15 ***
gr.webers         9.466e-03  2.738e-01   0.035 0.972415    
gr.rmand          1.580e+00  1.279e+00   1.236 0.216588    
ndvi             -1.949e-04  5.238e-05  -3.721 0.000198 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb404"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a>m9 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(<span class="fu">log</span>(cwm.inv) <span class="sc">~</span> arid <span class="sc">+</span> Microsite.x  <span class="sc">+</span> gr.webers <span class="sc">+</span> gr.rmand <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), plt.ag)</span>
<span id="cb404-2"><a href="#cb404-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
log(cwm.inv) ~ arid + Microsite.x + gr.webers + gr.rmand + (1 |      Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  1615.7   1648.2   -800.8   1601.7      765 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.7445   0.8628  
 Residual             0.4460   0.6678  
Number of obs: 772, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.446 

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)      -3.66145    0.77541  -4.722 2.34e-06 ***
arid              0.20120    0.04977   4.042 5.29e-05 ***
Microsite.xshrub  0.37093    0.04821   7.694 1.43e-14 ***
gr.webers        -0.07522    0.27524  -0.273    0.785    
gr.rmand          1.61836    1.29085   1.254    0.210    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb406"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m8, m9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   df      AIC
m8  8 1603.993
m9  7 1615.695</code></pre>
</div>
<div class="sourceCode cell-code" id="cb408"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(m8, m9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   df      BIC
m8  8 1641.185
m9  7 1648.238</code></pre>
</div>
<div class="sourceCode cell-code" id="cb410"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a>m8<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(<span class="fu">log</span>(cwm.inv) <span class="sc">~</span> arid <span class="sc">+</span> Microsite.x  <span class="sc">+</span> gr.webers  <span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), plt.ag)</span>
<span id="cb410-2"><a href="#cb410-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m8<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
log(cwm.inv) ~ arid + Microsite.x + gr.webers + ndvi + (1 | Site)
Data: plt.ag

     AIC      BIC   logLik deviance df.resid 
  1603.5   1636.1   -794.8   1589.5      765 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.8887   0.9427  
 Residual             0.4382   0.6620  
Number of obs: 772, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.438 

Conditional model:
                   Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)      -3.048e+00  6.922e-01  -4.404 1.06e-05 ***
arid              2.445e-01  5.498e-02   4.446 8.73e-06 ***
Microsite.xshrub  3.737e-01  4.779e-02   7.818 5.36e-15 ***
gr.webers         1.109e-01  2.615e-01   0.424 0.671496    
ndvi             -1.955e-04  5.244e-05  -3.727 0.000194 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m8<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
           R2m       R2c
[1,] 0.6233106 0.8755967

$hierarchical.partitioning
             Unique Average.share Individual I.perc(%)
arid         0.5954        0.0200     0.6154     98.73
Microsite.x  0.0083        0.0020     0.0103      1.65
gr.webers   -0.0037        0.0031    -0.0006     -0.10
ndvi        -0.0210        0.0192    -0.0018     -0.29

$variables
[1] "arid"        "Microsite.x" "gr.webers"   "ndvi"       

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb414"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: log(cwm.inv)
              Chisq Df Pr(&gt;Chisq)    
arid        18.6553  1  1.566e-05 ***
Microsite.x 61.1303  1  5.342e-15 ***
gr.webers    0.0012  1  0.9724155    
gr.rmand     1.5268  1  0.2165880    
ndvi        13.8468  1  0.0001983 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
           R2m       R2c
[1,] 0.6210982 0.8761431

$hierarchical.partitioning
             Unique Average.share Individual I.perc(%)
arid         0.5954        0.0186     0.6140     98.86
Microsite.x  0.0084        0.0018     0.0102      1.64
gr.webers   -0.0003        0.0007     0.0004      0.06
gr.rmand    -0.0022        0.0007    -0.0015     -0.24
ndvi        -0.0207        0.0187    -0.0020     -0.32

$variables
[1] "arid"        "Microsite.x" "gr.webers"   "gr.rmand"    "ndvi"       

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb418"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, <span class="fu">log</span>(cwm.inv), <span class="at">fill =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb421"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true" tabindex="-1"></a>re <span class="ot">&lt;-</span> <span class="fu">simulateResiduals</span>(m1)</span>
<span id="cb421-2"><a href="#cb421-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(re)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, <span class="fu">log</span>(seed.weight), <span class="at">fill =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 88 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb425"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, <span class="fu">log</span>(nat.cwm), <span class="at">fill =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, cwm.inv, <span class="at">fill =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-18-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="ant-models" class="level2">
<h2 class="anchored" data-anchor-id="ant-models">Ant Models</h2>
<section id="ant-viz" class="level3">
<h3 class="anchored" data-anchor-id="ant-viz">Ant Viz</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb431"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(ndvi, gr.abun, <span class="at">fill =</span> Microsite)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb433"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(arid, gr.abun, <span class="at">fill =</span> Microsite)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb435"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(ndvi, gr.richness, <span class="at">fill =</span> Microsite)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-19-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb437"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(arid, gr.richness, <span class="at">fill =</span> Microsite)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-19-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gran-richness" class="level3">
<h3 class="anchored" data-anchor-id="gran-richness">Gran Richness</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb439"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.richness <span class="sc">~</span> Microsite <span class="sc">+</span>arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, pts)</span>
<span id="cb439-2"><a href="#cb439-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb439-3"><a href="#cb439-3" aria-hidden="true" tabindex="-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.richness <span class="sc">~</span> ndvi <span class="sc">+</span> Microsite <span class="sc">+</span>arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, pts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb441"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true" tabindex="-1"></a>m4 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.richness <span class="sc">~</span> ndvi <span class="sc">+</span> Microsite <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, pts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb444"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb444-1"><a href="#cb444-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m2, m3, m4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   df      AIC
m2  4 909.6973
m3  5 901.7624
m4  4 903.5773</code></pre>
</div>
<div class="sourceCode cell-code" id="cb446"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb446-1"><a href="#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          gr.richness ~ ndvi + Microsite + arid + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
   901.8    923.2   -445.9    891.8      530 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.07504  0.2739  
Number of obs: 535, groups:  Site, 7

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)    -1.4491720  0.2423995  -5.978 2.25e-09 ***
ndvi            0.0004327  0.0001329   3.256  0.00113 ** 
Micrositeshrub  0.0021428  0.1305019   0.016  0.98690    
arid           -0.0738308  0.0339670  -2.174  0.02973 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb448"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.richness <span class="sc">~</span> ndvi <span class="sc">+</span>Microsite  <span class="sc">*</span> arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, pts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb451"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          gr.richness ~ ndvi + Microsite * arid + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
   903.3    929.0   -445.6    891.3      529 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.07485  0.2736  
Number of obs: 535, groups:  Site, 7

Conditional model:
                      Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)         -1.5116337  0.2589799  -5.837 5.32e-09 ***
ndvi                 0.0004337  0.0001328   3.265   0.0011 ** 
Micrositeshrub       0.1248514  0.2169446   0.575   0.5650    
arid                -0.0673148  0.0351313  -1.916   0.0554 .  
Micrositeshrub:arid -0.0135250  0.0191025  -0.708   0.4789    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb453"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true" tabindex="-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.richness <span class="sc">~</span> ndvi <span class="sc">*</span>Microsite <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, pts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb456"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          gr.richness ~ ndvi * Microsite + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
   904.6    926.0   -447.3    894.6      530 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.1794   0.4236  
Number of obs: 535, groups:  Site, 7

Conditional model:
                      Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)         -1.657e+00  3.320e-01  -4.991    6e-07 ***
ndvi                 2.663e-04  9.697e-05   2.746  0.00602 ** 
Micrositeshrub       2.438e-01  2.710e-01   0.900  0.36831    
ndvi:Micrositeshrub -7.834e-05  7.814e-05  -1.002  0.31612    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb458"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.richness <span class="sc">~</span> ndvi <span class="sc">+</span> Microsite <span class="sc">+</span>arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, pts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb461"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb461-1"><a href="#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: poisson  ( log )
Formula:          gr.richness ~ ndvi + Microsite + arid + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
   901.8    923.2   -445.9    891.8      530 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.07504  0.2739  
Number of obs: 535, groups:  Site, 7

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)    -1.4491720  0.2423995  -5.978 2.25e-09 ***
ndvi            0.0004327  0.0001329   3.256  0.00113 ** 
Micrositeshrub  0.0021428  0.1305019   0.016  0.98690    
arid           -0.0738308  0.0339670  -2.174  0.02973 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb463"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb463-1"><a href="#cb463-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: gr.richness
            Chisq Df Pr(&gt;Chisq)   
ndvi      10.6018  1    0.00113 **
Microsite  0.0003  1    0.98690   
arid       4.7246  1    0.02973 * 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb465"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb465-1"><a href="#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_collinearity</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Check for Multicollinearity

Low Correlation

      Term  VIF       VIF 95% CI adj. VIF Tolerance Tolerance 95% CI
      ndvi 3.37 [2.94,     3.91]     1.84      0.30     [0.26, 0.34]
 Microsite 1.00 [1.00,      Inf]     1.00      1.00     [0.00, 1.00]
      arid 3.37 [2.94,     3.91]     1.84      0.30     [0.26, 0.34]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb467"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb467-1"><a href="#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_overdispersion</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Overdispersion test

       dispersion ratio =   1.030
  Pearson's Chi-Squared = 545.698
                p-value =   0.309</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>No overdispersion detected.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb470"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="fu">performance</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Indices of model performance

AIC     |    AICc |     BIC | R2 (cond.) | R2 (marg.) |   ICC |  RMSE | Sigma
-----------------------------------------------------------------------------
901.762 | 901.876 | 923.174 |      0.125 |      0.069 | 0.060 | 0.659 | 1.000

AIC     | Score_log | Score_spherical
-------------------------------------
901.762 |    -0.821 |           0.039</code></pre>
</div>
<div class="sourceCode cell-code" id="cb472"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
                 R2m        R2c
delta     0.03832367 0.06949671
lognormal 0.06870145 0.12458421
trigamma  0.01496137 0.02713118

$delta
           Unique Average.share Individual I.perc(%)
ndvi       0.0339        0.0063     0.0402    104.96
Microsite  0.0000        0.0000     0.0000      0.00
arid      -0.0082        0.0063    -0.0019     -4.96

$lognormal
           Unique Average.share Individual I.perc(%)
ndvi       0.0609        0.0097     0.0706    102.77
Microsite  0.0000        0.0000     0.0000      0.00
arid      -0.0115        0.0096    -0.0019     -2.77

$trigamma
           Unique Average.share Individual I.perc(%)
ndvi       0.0132        0.0028      0.016    106.67
Microsite  0.0000        0.0000      0.000      0.00
arid      -0.0038        0.0028     -0.001     -6.67

$variables
[1] "ndvi"      "Microsite" "arid"     

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb499"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb499-1"><a href="#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m3, <span class="at">commonality =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
                 R2m        R2c
delta     0.03832367 0.06949671
lognormal 0.06870145 0.12458421
trigamma  0.01496137 0.02713118

$delta
                                    Fractions   % Total
Unique to ndvi                         0.0339     88.35
Unique to Microsite                    0.0000     -0.01
Unique to arid                        -0.0082    -21.48
Common to ndvi, and Microsite          0.0000      0.04
Common to ndvi, and arid               0.0127     33.09
Common to Microsite, and arid          0.0000     -0.02
Common to ndvi, Microsite, and arid    0.0000      0.03
Total                                  0.0383    100.00

$lognormal
                                    Fractions   % Total
Unique to ndvi                         0.0609     88.63
Unique to Microsite                    0.0000     -0.01
Unique to arid                        -0.0115    -16.73
Common to ndvi, and Microsite          0.0000      0.04
Common to ndvi, and arid               0.0193     28.06
Common to Microsite, and arid          0.0000     -0.02
Common to ndvi, Microsite, and arid    0.0000      0.02
Total                                  0.0687    100.00

$trigamma
                                    Fractions   % Total
Unique to ndvi                         0.0132     88.13
Unique to Microsite                    0.0000     -0.01
Unique to arid                        -0.0038    -25.40
Common to ndvi, and Microsite          0.0000      0.04
Common to ndvi, and arid               0.0056     37.25
Common to Microsite, and arid          0.0000     -0.02
Common to ndvi, Microsite, and arid    0.0000      0.03
Total                                  0.0150    100.00

$variables
[1] "ndvi"      "Microsite" "arid"     

$type
[1] "commonality.analysis"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
</div>
</section>
<section id="gran-abundance" class="level3">
<h3 class="anchored" data-anchor-id="gran-abundance">Gran abundance</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb526"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb526-1"><a href="#cb526-1" aria-hidden="true" tabindex="-1"></a>m2<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(abun <span class="sc">~</span> arid<span class="sc">+</span> Microsite   <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"poisson"</span>, pts)</span>
<span id="cb526-2"><a href="#cb526-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb526-3"><a href="#cb526-3" aria-hidden="true" tabindex="-1"></a>m3.nb <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.abun <span class="sc">~</span>  arid <span class="sc">+</span> Microsite  <span class="sc">+</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom2"</span>, pts)</span>
<span id="cb526-4"><a href="#cb526-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb526-5"><a href="#cb526-5" aria-hidden="true" tabindex="-1"></a>m3.nb1 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.abun <span class="sc">~</span> arid <span class="sc">+</span> Microsite  <span class="sc">+</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>year), <span class="at">family =</span> <span class="st">"nbinom2"</span>, pts)</span>
<span id="cb526-6"><a href="#cb526-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb526-7"><a href="#cb526-7" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m3.nb, m3.nb1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       df      AIC
m3.nb   6 1294.089
m3.nb1  7 1296.089</code></pre>
</div>
<div class="sourceCode cell-code" id="cb528"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb528-1"><a href="#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="co">#no improvement with year</span></span>
<span id="cb528-2"><a href="#cb528-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb528-3"><a href="#cb528-3" aria-hidden="true" tabindex="-1"></a>m4.nb1 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.abun <span class="sc">~</span> arid <span class="sc">+</span> Microsite  <span class="sc">+</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, pts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb530"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb530-1"><a href="#cb530-1" aria-hidden="true" tabindex="-1"></a>m4.nb2 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.abun <span class="sc">~</span> arid <span class="sc">+</span> Microsite  <span class="sc">+</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom2"</span>, pts)</span>
<span id="cb530-2"><a href="#cb530-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb530-3"><a href="#cb530-3" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m4.nb1, m4.nb2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       df      AIC
m4.nb1  6 1279.667
m4.nb2  6 1294.089</code></pre>
</div>
<div class="sourceCode cell-code" id="cb532"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb532-1"><a href="#cb532-1" aria-hidden="true" tabindex="-1"></a>m4.int <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.abun <span class="sc">~</span> arid <span class="sc">*</span> Microsite  <span class="sc">+</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, pts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb535"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb535-1"><a href="#cb535-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m4.int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: nbinom1  ( log )
Formula:          gr.abun ~ arid * Microsite + ndvi + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
  1281.6   1311.6   -633.8   1267.6      528 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.04855  0.2203  
Number of obs: 535, groups:  Site, 7

Dispersion parameter for nbinom1 family (): 3.53 

Conditional model:
                      Estimate Std. Error z value Pr(&gt;|z|)   
(Intercept)         -0.7680991  0.2664499  -2.883  0.00394 **
arid                -0.0796005  0.0372941  -2.134  0.03281 * 
Micrositeshrub       0.1365227  0.2428167   0.562  0.57395   
ndvi                 0.0004674  0.0001456   3.209  0.00133 **
arid:Micrositeshrub -0.0029802  0.0215771  -0.138  0.89015   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb537"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb537-1"><a href="#cb537-1" aria-hidden="true" tabindex="-1"></a>m4.int2 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.abun <span class="sc">~</span> arid <span class="sc">+</span> Microsite  <span class="sc">*</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">family =</span> <span class="st">"nbinom1"</span>, pts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb540"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb540-1"><a href="#cb540-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m4.int2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: nbinom1  ( log )
Formula:          gr.abun ~ arid + Microsite * ndvi + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
  1281.6   1311.6   -633.8   1267.6      528 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.04849  0.2202  
Number of obs: 535, groups:  Site, 7

Dispersion parameter for nbinom1 family (): 3.53 

Conditional model:
                      Estimate Std. Error z value Pr(&gt;|z|)   
(Intercept)         -7.953e-01  2.829e-01  -2.811  0.00493 **
arid                -8.118e-02  3.577e-02  -2.269  0.02325 * 
Micrositeshrub       1.864e-01  2.995e-01   0.622  0.53376   
ndvi                 4.812e-04  1.534e-04   3.137  0.00171 **
Micrositeshrub:ndvi -2.556e-05  8.704e-05  -0.294  0.76906   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb542"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb542-1"><a href="#cb542-1" aria-hidden="true" tabindex="-1"></a>em <span class="ot">&lt;-</span> <span class="fu">emtrends</span>(m4.int, <span class="sc">~</span>Microsite, <span class="at">var =</span> <span class="st">"arid"</span>)</span>
<span id="cb542-2"><a href="#cb542-2" aria-hidden="true" tabindex="-1"></a><span class="fu">test</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Microsite arid.trend     SE  df z.ratio p.value
 open         -0.0796 0.0373 Inf  -2.134  0.0328
 shrub        -0.0826 0.0375 Inf  -2.204  0.0275</code></pre>
</div>
<div class="sourceCode cell-code" id="cb544"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb544-1"><a href="#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contrast     estimate     SE  df z.ratio p.value
 open - shrub  0.00298 0.0216 Inf   0.138  0.8901</code></pre>
</div>
<div class="sourceCode cell-code" id="cb546"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb546-1"><a href="#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m4.nb1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
                  R2m         R2c
delta     0.022388652 0.032411982
lognormal 0.057293680 0.082943883
trigamma  0.004629545 0.006702178

$delta
          Unique Average.share Individual I.perc(%)
arid      0.0010         6e-04     0.0016      7.14
Microsite 0.0004         2e-04     0.0006      2.68
ndvi      0.0194         8e-04     0.0202     90.18

$lognormal
          Unique Average.share Individual I.perc(%)
arid      0.0044         7e-04     0.0051      8.89
Microsite 0.0011         4e-04     0.0015      2.61
ndvi      0.0498         1e-03     0.0508     88.50

$trigamma
          Unique Average.share Individual I.perc(%)
arid       1e-04         2e-04     0.0003      6.52
Microsite  1e-04         0e+00     0.0001      2.17
ndvi       4e-03         2e-04     0.0042     91.30

$variables
[1] "arid"      "Microsite" "ndvi"     

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb574"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb574-1"><a href="#cb574-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m4.nb1, <span class="at">commonality =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.

Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation

Warning in (function (start, objective, gradient = NULL, hessian = NULL, :
NA/NaN function evaluation</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: the null model is only correct if all the variables it uses are identical 
to those used in fitting the original model.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
                  R2m         R2c
delta     0.022388652 0.032411982
lognormal 0.057293680 0.082943883
trigamma  0.004629545 0.006702178

$delta
                                    Fractions   % Total
Unique to arid                         0.0010      4.26
Unique to Microsite                    0.0004      1.89
Unique to ndvi                         0.0194     86.53
Common to arid, and Microsite          0.0000      0.08
Common to arid, and ndvi               0.0013      5.87
Common to Microsite, and ndvi          0.0003      1.28
Common to arid, Microsite, and ndvi    0.0000      0.08
Total                                  0.0224    100.00

$lognormal
                                    Fractions   % Total
Unique to arid                         0.0044      7.63
Unique to Microsite                    0.0011      1.86
Unique to ndvi                         0.0498     86.85
Common to arid, and Microsite          0.0000      0.01
Common to arid, and ndvi               0.0013      2.26
Common to Microsite, and ndvi          0.0007      1.23
Common to arid, Microsite, and ndvi    0.0001      0.16
Total                                  0.0573    100.00

$trigamma
                                    Fractions   % Total
Unique to arid                         0.0001      2.29
Unique to Microsite                    0.0001      1.84
Unique to ndvi                         0.0040     86.37
Common to arid, and Microsite          0.0000      0.12
Common to arid, and ndvi               0.0004      7.97
Common to Microsite, and ndvi          0.0001      1.36
Common to arid, Microsite, and ndvi    0.0000      0.04
Total                                  0.0046    100.00

$variables
[1] "arid"      "Microsite" "ndvi"     

$type
[1] "commonality.analysis"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb601"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb601-1"><a href="#cb601-1" aria-hidden="true" tabindex="-1"></a><span class="fu">performance</span>(m4.nb1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Indices of model performance

AIC      |     AICc |      BIC | R2 (cond.) | R2 (marg.) |   ICC |  RMSE
------------------------------------------------------------------------
1279.667 | 1279.826 | 1305.360 |      0.158 |      0.109 | 0.055 | 4.111

AIC      | Sigma | Score_log | Score_spherical
----------------------------------------------
1279.667 | 3.532 |    -2.093 |           0.039</code></pre>
</div>
<div class="sourceCode cell-code" id="cb603"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb603-1"><a href="#cb603-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m4.nb1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: nbinom1  ( log )
Formula:          gr.abun ~ arid + Microsite + ndvi + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
  1279.7   1305.4   -633.8   1267.7      529 

Random effects:

Conditional model:
 Groups Name        Variance Std.Dev.
 Site   (Intercept) 0.04868  0.2206  
Number of obs: 535, groups:  Site, 7

Dispersion parameter for nbinom1 family (): 3.53 

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)   
(Intercept)    -0.7530614  0.2429333  -3.100  0.00194 **
arid           -0.0810578  0.0358152  -2.263  0.02362 * 
Micrositeshrub  0.1098192  0.1467591   0.748  0.45428   
ndvi            0.0004667  0.0001457   3.203  0.00136 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb605"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb605-1"><a href="#cb605-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m4.nb1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: gr.abun
            Chisq Df Pr(&gt;Chisq)   
arid       5.1222  1   0.023622 * 
Microsite  0.5599  1   0.454282   
ndvi      10.2622  1   0.001358 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="webers" class="level3">
<h3 class="anchored" data-anchor-id="webers">Webers</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb607"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb607-1"><a href="#cb607-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(pts<span class="sc">$</span>gr.abun, pts<span class="sc">$</span>gr.webers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  pts$gr.abun and pts$gr.webers
t = 0.48814, df = 177, p-value = 0.6261
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.1106010  0.1823577
sample estimates:
       cor 
0.03666609 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb609"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb609-1"><a href="#cb609-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(site.env<span class="sc">$</span>mn.gr.abun, site.env<span class="sc">$</span>gr.webers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  site.env$mn.gr.abun and site.env$gr.webers
t = -0.50452, df = 18, p-value = 0.62
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.5327664  0.3423236
sample estimates:
       cor 
-0.1180854 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb611"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb611-1"><a href="#cb611-1" aria-hidden="true" tabindex="-1"></a>m5 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.webers <span class="sc">~</span> cwm.site.nat <span class="sc">+</span> cwm.site.inv <span class="sc">+</span> arid <span class="sc">+</span> Microsite  <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">data =</span> pts)</span>
<span id="cb611-2"><a href="#cb611-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          gr.webers ~ cwm.site.nat + cwm.site.inv + arid + Microsite +  
    (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
    52.0     74.3    -19.0     38.0      172 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.02259  0.1503  
 Residual             0.06643  0.2577  
Number of obs: 179, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.0664 

Conditional model:
               Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     1.78534    0.23202   7.695 1.42e-14 ***
cwm.site.nat   -0.38787    0.34261  -1.132 0.257589    
cwm.site.inv    0.03326    0.14583   0.228 0.819576    
arid           -0.04412    0.02406  -1.833 0.066734 .  
Micrositeshrub -0.14076    0.03950  -3.564 0.000366 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb613"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb613-1"><a href="#cb613-1" aria-hidden="true" tabindex="-1"></a>m5<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.webers <span class="sc">~</span> cwm.site.nat <span class="sc">+</span> cwm.site.inv <span class="sc">+</span> arid <span class="sc">*</span> Microsite  <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">data =</span> pts)</span>
<span id="cb613-2"><a href="#cb613-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb613-3"><a href="#cb613-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m5<span class="fl">.1</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          gr.webers ~ cwm.site.nat + cwm.site.inv + arid * Microsite +  
    (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
    53.7     79.2    -18.8     37.7      171 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.02051  0.1432  
 Residual             0.06652  0.2579  
Number of obs: 179, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.0665 

Conditional model:
                     Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)          1.788220   0.230903   7.744  9.6e-15 ***
cwm.site.nat        -0.423882   0.352411  -1.203    0.229    
cwm.site.inv         0.018630   0.152660   0.122    0.903    
arid                -0.040375   0.025336  -1.594    0.111    
Micrositeshrub      -0.108644   0.066890  -1.624    0.104    
arid:Micrositeshrub -0.003496   0.005863  -0.596    0.551    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb615"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb615-1"><a href="#cb615-1" aria-hidden="true" tabindex="-1"></a>m6 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.webers <span class="sc">~</span> cwm.site <span class="sc">+</span> arid <span class="sc">+</span> Microsite <span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">data =</span> pts)</span>
<span id="cb615-2"><a href="#cb615-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-3"><a href="#cb615-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-4"><a href="#cb615-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-5"><a href="#cb615-5" aria-hidden="true" tabindex="-1"></a>m7 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.webers <span class="sc">~</span> cwm.site <span class="sc">+</span> arid <span class="sc">+</span> Microsite <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">data =</span> pts)</span>
<span id="cb615-6"><a href="#cb615-6" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m6, m7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   df      AIC
m6  7 49.75275
m7  6 47.75498</code></pre>
</div>
<div class="sourceCode cell-code" id="cb617"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb617-1"><a href="#cb617-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(m6, m7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   df      BIC
m6  7 72.06445
m7  6 66.87930</code></pre>
</div>
<div class="sourceCode cell-code" id="cb619"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb619-1"><a href="#cb619-1" aria-hidden="true" tabindex="-1"></a>gwebers <span class="ot">&lt;-</span> <span class="fu">glmm.hp</span>(m7, <span class="at">commonality =</span> <span class="cn">TRUE</span>)</span>
<span id="cb619-2"><a href="#cb619-2" aria-hidden="true" tabindex="-1"></a><span class="co">#model without NDVI is better</span></span>
<span id="cb619-3"><a href="#cb619-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-4"><a href="#cb619-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-5"><a href="#cb619-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          gr.webers ~ cwm.site + arid + Microsite + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
    47.8     66.9    -17.9     35.8      173 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept) 0.05877  0.2424  
 Residual             0.06327  0.2515  
Number of obs: 179, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.0633 

Conditional model:
               Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     1.43617    0.15302   9.386  &lt; 2e-16 ***
cwm.site        0.17149    0.07096   2.417 0.015670 *  
arid           -0.03627    0.01461  -2.483 0.013023 *  
Micrositeshrub -0.14199    0.03816  -3.721 0.000198 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb621"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb621-1"><a href="#cb621-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: gr.webers
            Chisq Df Pr(&gt;Chisq)    
cwm.site   5.8396  1  0.0156696 *  
arid       6.1659  1  0.0130234 *  
Microsite 13.8476  1  0.0001983 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="mandible-length" class="level3">
<h3 class="anchored" data-anchor-id="mandible-length">Mandible length</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb623"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb623-1"><a href="#cb623-1" aria-hidden="true" tabindex="-1"></a>m9 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.rmand <span class="sc">~</span>cwm.site.nat<span class="sc">*</span>arid <span class="sc">+</span> cwm.site.inv <span class="sc">+</span> arid <span class="sc">+</span> Microsite  <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">data =</span> pts)</span>
<span id="cb623-2"><a href="#cb623-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
gr.rmand ~ cwm.site.nat * arid + cwm.site.inv + arid + Microsite +  
    (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
  -664.1   -638.6    340.1   -680.1      171 

Random effects:

Conditional model:
 Groups   Name        Variance  Std.Dev.
 Site     (Intercept) 0.0000867 0.009311
 Residual             0.0012611 0.035512
Number of obs: 179, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.00126 

Conditional model:
                   Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)        0.380592   0.027030  14.080   &lt;2e-16 ***
cwm.site.nat       0.097032   0.054994   1.764   0.0777 .  
arid               0.004813   0.002254   2.135   0.0327 *  
cwm.site.inv      -0.001310   0.008446  -0.155   0.8768    
Micrositeshrub    -0.005277   0.005408  -0.976   0.3292    
cwm.site.nat:arid -0.016861   0.007333  -2.299   0.0215 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb625"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb625-1"><a href="#cb625-1" aria-hidden="true" tabindex="-1"></a>m9 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.rmand <span class="sc">~</span>cwm.site <span class="sc">+</span> arid <span class="sc">+</span> Microsite  <span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">data =</span> pts)</span>
<span id="cb625-2"><a href="#cb625-2" aria-hidden="true" tabindex="-1"></a>m10 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.rmand <span class="sc">~</span>cwm.site <span class="sc">+</span> arid <span class="sc">+</span> Microsite   <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">data =</span> pts)</span>
<span id="cb625-3"><a href="#cb625-3" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m9, m10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    df       AIC
m9   7 -663.8078
m10  6 -665.7974</code></pre>
</div>
<div class="sourceCode cell-code" id="cb627"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb627-1"><a href="#cb627-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          gr.rmand ~ cwm.site + arid + Microsite + (1 | Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
  -665.8   -646.7    338.9   -677.8      173 

Random effects:

Conditional model:
 Groups   Name        Variance  Std.Dev.
 Site     (Intercept) 0.0002509 0.01584 
 Residual             0.0012392 0.03520 
Number of obs: 179, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.00124 

Conditional model:
                Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     0.415955   0.011253   36.96   &lt;2e-16 ***
cwm.site       -0.010199   0.008194   -1.24    0.213    
arid            0.001576   0.001107    1.42    0.155    
Micrositeshrub -0.004692   0.005346   -0.88    0.380    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb629"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb629-1"><a href="#cb629-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: gr.rmand
           Chisq Df Pr(&gt;Chisq)
cwm.site  1.5490  1     0.2133
arid      2.0258  1     0.1547
Microsite 0.7704  1     0.3801</code></pre>
</div>
<div class="sourceCode cell-code" id="cb631"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb631-1"><a href="#cb631-1" aria-hidden="true" tabindex="-1"></a>m10 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(gr.rmand <span class="sc">~</span>cwm.site.inv <span class="sc">+</span> cwm.site.nat <span class="sc">+</span> arid <span class="sc">+</span> Microsite   <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), <span class="at">data =</span> pts)</span>
<span id="cb631-2"><a href="#cb631-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
gr.rmand ~ cwm.site.inv + cwm.site.nat + arid + Microsite + (1 |      Site)
Data: pts

     AIC      BIC   logLik deviance df.resid 
  -662.5   -640.2    338.3   -676.5      172 

Random effects:

Conditional model:
 Groups   Name        Variance  Std.Dev.
 Site     (Intercept) 0.0004126 0.02031 
 Residual             0.0012273 0.03503 
Number of obs: 179, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 0.00123 

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     4.193e-01  2.800e-02  14.975   &lt;2e-16 ***
cwm.site.inv    3.427e-03  1.209e-02   0.283    0.777    
cwm.site.nat   -6.603e-03  3.432e-02  -0.192    0.847    
arid            7.044e-05  2.677e-03   0.026    0.979    
Micrositeshrub -4.813e-03  5.336e-03  -0.902    0.367    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="seed-removal-rates" class="level1">
<h1>Seed removal rates</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb633"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb633-1"><a href="#cb633-1" aria-hidden="true" tabindex="-1"></a>seeds <span class="ot">&lt;-</span> <span class="fu">mutate</span>(seeds, <span class="at">percent =</span> (<span class="dv">2</span> <span class="sc">-</span>ending.weight)<span class="sc">/</span><span class="fl">0.02</span>)</span>
<span id="cb633-2"><a href="#cb633-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-3"><a href="#cb633-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-4"><a href="#cb633-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-5"><a href="#cb633-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-6"><a href="#cb633-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-7"><a href="#cb633-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-8"><a href="#cb633-8" aria-hidden="true" tabindex="-1"></a>m7 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span> Size <span class="sc">+</span> Microsite <span class="sc">+</span> ndvi  <span class="sc">+</span> mn.gr.abun<span class="sc">+</span> gr.webers<span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb633-9"><a href="#cb633-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-10"><a href="#cb633-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-11"><a href="#cb633-11" aria-hidden="true" tabindex="-1"></a>m8 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span> Size <span class="sc">+</span> Microsite <span class="sc">+</span> ndvi  <span class="sc">+</span>  gr.webers <span class="sc">+</span> arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb633-12"><a href="#cb633-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-13"><a href="#cb633-13" aria-hidden="true" tabindex="-1"></a>m9 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span> Size <span class="sc">+</span> Microsite  <span class="sc">+</span> mn.gr.abun<span class="sc">+</span> ndvi <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb633-14"><a href="#cb633-14" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
           R2m       R2c
[1,] 0.2201239 0.4429465

$hierarchical.partitioning
           Unique Average.share Individual I.perc(%)
Size       0.0081        0.0052     0.0133      6.04
Microsite  0.0010       -0.0003     0.0007      0.32
mn.gr.abun 0.0405       -0.0106     0.0299     13.58
ndvi       0.1814       -0.0052     0.1762     80.05

$variables
[1] "Size"       "Microsite"  "mn.gr.abun" "ndvi"      

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb635"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb635-1"><a href="#cb635-1" aria-hidden="true" tabindex="-1"></a><span class="co">#m10 &lt;- glmmTMB(percent ~ Size + Microsite + ndvi+ mn.gr.abun + arid + (1|Year) + (1|Site), seeds)</span></span>
<span id="cb635-2"><a href="#cb635-2" aria-hidden="true" tabindex="-1"></a><span class="co"># no convergence</span></span>
<span id="cb635-3"><a href="#cb635-3" aria-hidden="true" tabindex="-1"></a>m11 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span> Size <span class="sc">+</span> Microsite <span class="sc">+</span> ndvi <span class="sc">+</span> mn.gr.abun <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb635-4"><a href="#cb635-4" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5905.323</code></pre>
</div>
<div class="sourceCode cell-code" id="cb637"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb637-1"><a href="#cb637-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          percent ~ Size + Microsite + ndvi + mn.gr.abun + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5905.3   5940.4  -2944.7   5889.3      585 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept)  462.2   21.50   
 Residual             1155.6   33.99   
Number of obs: 593, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.16e+03 

Conditional model:
                Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)    61.373877  12.210706   5.026 5.00e-07 ***
Sizemed         7.773261   3.401365   2.285 0.022293 *  
Sizesmall      12.724649   3.435733   3.704 0.000213 ***
Micrositeshrub -1.801134   2.797841  -0.644 0.519732    
ndvi           -0.014451   0.003407  -4.242 2.21e-05 ***
mn.gr.abun      6.129933   1.428712   4.291 1.78e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb639"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb639-1"><a href="#cb639-1" aria-hidden="true" tabindex="-1"></a>m12 <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span> Size <span class="sc">+</span> Microsite <span class="sc">+</span> mn.gr.abun <span class="sc">+</span> arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb639-2"><a href="#cb639-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m12)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
percent ~ Size + Microsite + mn.gr.abun + arid + (1 | Year) +      (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5928.3   5967.8  -2955.2   5910.3      584 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Year     (Intercept)    1.847  1.359  
 Site     (Intercept)  253.891 15.934  
 Residual             1205.203 34.716  
Number of obs: 593, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.21e+03 

Conditional model:
               Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     32.7146    10.2801   3.182 0.001461 ** 
Sizemed          7.9060     3.4755   2.275 0.022919 *  
Sizesmall       13.1134     3.5088   3.737 0.000186 ***
Micrositeshrub  -1.7753     2.8571  -0.621 0.534371    
mn.gr.abun       4.9772     1.4590   3.411 0.000646 ***
arid            -0.9013     0.9208  -0.979 0.327663    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb641"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb641-1"><a href="#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m11, m12)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    df      AIC
m11  8 5905.323
m12  9 5928.321</code></pre>
</div>
<div class="sourceCode cell-code" id="cb643"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb643-1"><a href="#cb643-1" aria-hidden="true" tabindex="-1"></a><span class="co">#keeping year because it improves a teeny bit</span></span>
<span id="cb643-2"><a href="#cb643-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-3"><a href="#cb643-3" aria-hidden="true" tabindex="-1"></a><span class="co">#m11.int &lt;- glmmTMB(percent ~ Size*ndvi + Microsite + mn.gr.abun +(1|Year) + (1|Site), seeds)</span></span>
<span id="cb643-4"><a href="#cb643-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-5"><a href="#cb643-5" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(m11.int)</span></span>
<span id="cb643-6"><a href="#cb643-6" aria-hidden="true" tabindex="-1"></a><span class="co">#all NA convergence</span></span>
<span id="cb643-7"><a href="#cb643-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-8"><a href="#cb643-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-9"><a href="#cb643-9" aria-hidden="true" tabindex="-1"></a>m11.int <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  ndvi <span class="sc">+</span> Microsite <span class="sc">+</span>Size <span class="sc">*</span> mn.gr.abun<span class="sc">*</span>cwm.site <span class="sc">+</span> arid <span class="sc">+</span>  (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb643-10"><a href="#cb643-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-11"><a href="#cb643-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11.int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
percent ~ ndvi + Microsite + Size * mn.gr.abun * cwm.site + arid +  
    (1 | Year) + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5830.8   5909.7  -2897.4   5794.8      575 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Year     (Intercept) 130.3    11.42   
 Site     (Intercept) 123.7    11.12   
 Residual             989.6    31.46   
Number of obs: 593, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2):  990 

Conditional model:
                                Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                    21.639610  12.749205   1.697 0.089634 .  
ndvi                           -0.010077   0.003441  -2.928 0.003409 ** 
Micrositeshrub                 -1.948875   2.589733  -0.753 0.451727    
Sizemed                        19.994897   9.631950   2.076 0.037904 *  
Sizesmall                      32.245537   9.534167   3.382 0.000719 ***
mn.gr.abun                     46.711595   8.434654   5.538 3.06e-08 ***
cwm.site                      -28.262696   8.698480  -3.249 0.001157 ** 
arid                            4.018139   0.913232   4.400 1.08e-05 ***
Sizemed:mn.gr.abun            -14.212566  11.723947  -1.212 0.225410    
Sizesmall:mn.gr.abun          -19.347157  11.586723  -1.670 0.094965 .  
Sizemed:cwm.site               -8.024719   8.105358  -0.990 0.322149    
Sizesmall:cwm.site            -12.729506   8.141876  -1.563 0.117944    
mn.gr.abun:cwm.site           -23.251449   5.249385  -4.429 9.45e-06 ***
Sizemed:mn.gr.abun:cwm.site     7.847827   7.327007   1.071 0.284132    
Sizesmall:mn.gr.abun:cwm.site   8.721238   7.235412   1.205 0.228066    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb645"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb645-1"><a href="#cb645-1" aria-hidden="true" tabindex="-1"></a><span class="co">#models with CWM sizes as interactions</span></span>
<span id="cb645-2"><a href="#cb645-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-3"><a href="#cb645-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-4"><a href="#cb645-4" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  ndvi <span class="sc">+</span> Microsite <span class="sc">+</span>Size<span class="sc">*</span> gr.rmand <span class="sc">+</span> mn.gr.abun <span class="sc">+</span> arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')</code></pre>
</div>
<div class="sourceCode cell-code" id="cb647"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb647-1"><a href="#cb647-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
percent ~ ndvi + Microsite + Size * gr.rmand + mn.gr.abun + arid +  
    (1 | Year) + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5795.0   5851.8  -2884.5   5769.0      569 

Random effects:

Conditional model:
 Groups   Name        Variance  Std.Dev. 
 Year     (Intercept) 1.661e-15 4.075e-08
 Site     (Intercept) 2.658e+02 1.630e+01
 Residual             1.140e+03 3.377e+01
Number of obs: 582, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.14e+03 

Conditional model:
                    Estimate Std. Error z value Pr(&gt;|z|)
(Intercept)         -0.82504        NaN     NaN      NaN
ndvi                -0.01594        NaN     NaN      NaN
Micrositeshrub      -1.44919        NaN     NaN      NaN
Sizemed            -15.28604        NaN     NaN      NaN
Sizesmall          -25.71801        NaN     NaN      NaN
gr.rmand           115.21577        NaN     NaN      NaN
mn.gr.abun           6.97166        NaN     NaN      NaN
arid                 2.07619        NaN     NaN      NaN
Sizemed:gr.rmand    52.90179        NaN     NaN      NaN
Sizesmall:gr.rmand  88.08547        NaN     NaN      NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb649"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb649-1"><a href="#cb649-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  ndvi <span class="sc">+</span> Microsite <span class="sc">+</span>Size<span class="sc">*</span> gr.webers <span class="sc">+</span> mn.gr.abun <span class="sc">+</span> arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')</code></pre>
</div>
<div class="sourceCode cell-code" id="cb651"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb651-1"><a href="#cb651-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          percent ~ ndvi + Microsite + Size * gr.webers + mn.gr.abun +  
    arid + (1 | Year) + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5796.0   5852.8  -2885.0   5770.0      569 

Random effects:

Conditional model:
 Groups   Name        Variance  Std.Dev. 
 Year     (Intercept) 1.342e-30 1.158e-15
 Site     (Intercept) 2.280e+02 1.510e+01
 Residual             1.144e+03 3.383e+01
Number of obs: 582, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.14e+03 

Conditional model:
                    Estimate Std. Error z value Pr(&gt;|z|)
(Intercept)         17.73174        NaN     NaN      NaN
ndvi                -0.01744        NaN     NaN      NaN
Micrositeshrub      -1.27994        NaN     NaN      NaN
Sizemed             -2.82118        NaN     NaN      NaN
Sizesmall           13.60998        NaN     NaN      NaN
gr.webers           22.18964        NaN     NaN      NaN
mn.gr.abun           4.67908        NaN     NaN      NaN
arid                 3.22514        NaN     NaN      NaN
Sizemed:gr.webers    8.04723        NaN     NaN      NaN
Sizesmall:gr.webers -1.58343        NaN     NaN      NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb653"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb653-1"><a href="#cb653-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.4</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  ndvi<span class="sc">*</span>Size <span class="sc">+</span> Microsite <span class="sc">+</span> mn.gr.abun <span class="sc">+</span> arid  <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb653-2"><a href="#cb653-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          percent ~ ndvi * Size + Microsite + mn.gr.abun + arid + (1 |  
    Year) + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5907.6   5960.2  -2941.8   5883.6      581 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Year     (Intercept)    8.242  2.871  
 Site     (Intercept)  316.672 17.795  
 Residual             1147.086 33.869  
Number of obs: 593, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.15e+03 

Conditional model:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     4.986e+01  1.226e+01   4.066 4.78e-05 ***
ndvi           -1.828e-02  3.643e-03  -5.018 5.23e-07 ***
Sizemed         2.700e+00  6.721e+00   0.402   0.6878    
Sizesmall       1.294e+01  6.911e+00   1.873   0.0611 .  
Micrositeshrub -1.800e+00  2.788e+00  -0.646   0.5185    
mn.gr.abun      5.992e+00  1.434e+00   4.179 2.93e-05 ***
arid            2.535e+00  1.223e+00   2.072   0.0383 *  
ndvi:Sizemed    1.955e-03  2.223e-03   0.879   0.3792    
ndvi:Sizesmall -7.708e-05  2.326e-03  -0.033   0.9736    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb655"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb655-1"><a href="#cb655-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.5</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  ndvi <span class="sc">+</span>Size <span class="sc">*</span> Microsite <span class="sc">+</span> mn.gr.abun <span class="sc">+</span> arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb655-2"><a href="#cb655-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          percent ~ ndvi + Size * Microsite + mn.gr.abun + arid + (1 |  
    Year) + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5908.3   5960.9  -2942.2   5884.3      581 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Year     (Intercept)    8.372  2.893  
 Site     (Intercept)  317.042 17.806  
 Residual             1148.474 33.889  
Number of obs: 593, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.15e+03 

Conditional model:
                          Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)              49.273633  12.008714   4.103 4.08e-05 ***
ndvi                     -0.017587   0.003447  -5.102 3.37e-07 ***
Sizemed                   6.326341   4.809753   1.315   0.1884    
Sizesmall                10.885853   4.928292   2.209   0.0272 *  
Micrositeshrub           -3.966646   4.759919  -0.833   0.4047    
mn.gr.abun                5.955153   1.434722   4.151 3.31e-05 ***
arid                      2.527448   1.224098   2.065   0.0389 *  
Sizemed:Micrositeshrub    3.008232   6.775506   0.444   0.6571    
Sizesmall:Micrositeshrub  3.565333   6.835864   0.522   0.6020    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb657"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb657-1"><a href="#cb657-1" aria-hidden="true" tabindex="-1"></a><span class="co">#m11.6 &lt;- glmmTMB(percent ~  ndvi + Microsite + mn.gr.abun + Size *arid + (1|Year) + (1|Site), seeds)</span></span>
<span id="cb657-2"><a href="#cb657-2" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(m11.6)</span></span>
<span id="cb657-3"><a href="#cb657-3" aria-hidden="true" tabindex="-1"></a><span class="co">#causes warnings</span></span>
<span id="cb657-4"><a href="#cb657-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-5"><a href="#cb657-5" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  ndvi <span class="sc">+</span> Microsite <span class="sc">+</span>Size<span class="sc">*</span> cwm.site <span class="sc">+</span> mn.gr.abun <span class="sc">+</span> arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb657-6"><a href="#cb657-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
percent ~ ndvi + Microsite + Size * cwm.site + mn.gr.abun + arid +  
    (1 | Year) + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5855.8   5912.8  -2914.9   5829.8      580 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Year     (Intercept)  124.0   11.13   
 Site     (Intercept)  152.4   12.35   
 Residual             1048.6   32.38   
Number of obs: 593, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.05e+03 

Conditional model:
                     Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)         45.937723  11.858962   3.874 0.000107 ***
ndvi                -0.006671   0.003509  -1.901 0.057296 .  
Micrositeshrub      -1.901960   2.665266  -0.714 0.475469    
Sizemed             10.569459   4.873859   2.169 0.030113 *  
Sizesmall           19.901472   4.888747   4.071 4.68e-05 ***
cwm.site           -48.566210   7.662037  -6.339 2.32e-10 ***
mn.gr.abun           7.612249   1.382706   5.505 3.68e-08 ***
arid                 3.684755   0.974901   3.780 0.000157 ***
Sizemed:cwm.site    -3.424763   5.091937  -0.673 0.501211    
Sizesmall:cwm.site -10.265629   5.122872  -2.004 0.045083 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb659"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb659-1"><a href="#cb659-1" aria-hidden="true" tabindex="-1"></a><span class="co">#seed size is significant</span></span>
<span id="cb659-2"><a href="#cb659-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-3"><a href="#cb659-3" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.7</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  ndvi <span class="sc">+</span> Microsite <span class="sc">+</span> mn.gr.abun <span class="sc">:</span>Size <span class="sc">+</span> arid <span class="sc">+</span> cwm.site <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb659-4"><a href="#cb659-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
percent ~ ndvi + Microsite + mn.gr.abun:Size + arid + cwm.site +  
    (1 | Year) + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5870.0   5918.3  -2924.0   5848.0      582 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Year     (Intercept)  119.8   10.95   
 Site     (Intercept)  149.2   12.22   
 Residual             1082.1   32.90   
Number of obs: 593, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.08e+03 

Conditional model:
                       Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)           55.526010  11.432701   4.857 1.19e-06 ***
ndvi                  -0.006761   0.003556  -1.901 0.057264 .  
Micrositeshrub        -1.734046   2.707319  -0.641 0.521846    
arid                   3.711047   0.976733   3.799 0.000145 ***
cwm.site             -52.660360   7.236282  -7.277 3.41e-13 ***
mn.gr.abun:Sizelarge   6.449576   1.856689   3.474 0.000513 ***
mn.gr.abun:Sizemed     8.583828   1.983874   4.327 1.51e-05 ***
mn.gr.abun:Sizesmall   7.778167   1.865440   4.170 3.05e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb661"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb661-1"><a href="#cb661-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m11<span class="fl">.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
           R2m       R2c
[1,] 0.2516907 0.4006957

$hierarchical.partitioning
                 Unique Average.share Individual I.perc(%)
ndvi            -0.0103        0.0615     0.0512     20.35
Microsite        0.0005        0.0068     0.0073      2.90
mn.gr.abun:Size  0.0359        0.0030     0.0389     15.46
arid            -0.1619        0.0920    -0.0699    -27.78
cwm.site         0.1566        0.0675     0.2241     89.07

$variables
[1] "ndvi"            "Microsite"       "mn.gr.abun:Size" "arid"           
[5] "cwm.site"       

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb665"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb665-1"><a href="#cb665-1" aria-hidden="true" tabindex="-1"></a><span class="co">#both abundance and cwm.site are significant interactions, but cwm becomes insignificant when included alongside abundance</span></span>
<span id="cb665-2"><a href="#cb665-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-3"><a href="#cb665-3" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.8</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  Microsite <span class="sc">+</span> mn.gr.abun <span class="sc">*</span> Size <span class="sc">+</span> arid <span class="sc">+</span> cwm.site<span class="sc">*</span>Size <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Year) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb665-4"><a href="#cb665-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
percent ~ Microsite + mn.gr.abun * Size + arid + cwm.site * Size +  
    (1 | Year) + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5857.7   5919.1  -2914.8   5829.7      579 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Year     (Intercept)  136.5   11.68   
 Site     (Intercept)  155.7   12.48   
 Residual             1047.9   32.37   
Number of obs: 593, groups:  Year, 2; Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.05e+03 

Conditional model:
                     Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)            39.797     11.934   3.335 0.000853 ***
Micrositeshrub         -1.875      2.664  -0.704 0.481581    
mn.gr.abun             10.221      2.263   4.517 6.27e-06 ***
Sizemed                11.736      5.128   2.288 0.022111 *  
Sizesmall              22.742      5.108   4.452 8.49e-06 ***
arid                    2.710      0.840   3.226 0.001254 ** 
cwm.site              -55.974      7.375  -7.590 3.21e-14 ***
mn.gr.abun:Sizemed     -2.214      3.241  -0.683 0.494520    
mn.gr.abun:Sizesmall   -6.001      3.146  -1.908 0.056425 .  
Sizemed:cwm.site       -1.795      5.553  -0.323 0.746501    
Sizesmall:cwm.site     -5.474      5.668  -0.966 0.334153    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb667"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb667-1"><a href="#cb667-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m11<span class="fl">.3</span>, m11<span class="fl">.7</span>, m11<span class="fl">.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      df      AIC
m11.3 13 5855.759
m11.7 11 5870.018
m11.8 14 5857.671</code></pre>
</div>
<div class="sourceCode cell-code" id="cb669"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb669-1"><a href="#cb669-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.7</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  Microsite <span class="sc">+</span> mn.gr.abun<span class="sc">:</span>Size <span class="sc">+</span> arid <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb669-2"><a href="#cb669-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m11<span class="fl">.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
            R2m       R2c
[1,] 0.03393151 0.1992513

$hierarchical.partitioning
                Unique Average.share Individual I.perc(%)
Microsite       0.0004         0e+00     0.0004      1.18
mn.gr.abun:Size 0.0191         6e-04     0.0197     57.94
arid            0.0132         7e-04     0.0139     40.88

$variables
[1] "Microsite"       "mn.gr.abun:Size" "arid"           

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb671"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb671-1"><a href="#cb671-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.8</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  Microsite <span class="sc">+</span> mn.gr.abun<span class="sc">:</span>Size <span class="sc">+</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb671-2"><a href="#cb671-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m11<span class="fl">.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
           R2m       R2c
[1,] 0.2122178 0.4394797

$hierarchical.partitioning
                Unique Average.share Individual I.perc(%)
Microsite       0.0009       -0.0003     0.0006      0.28
mn.gr.abun:Size 0.0405       -0.0101     0.0304     14.33
ndvi            0.1915       -0.0103     0.1812     85.39

$variables
[1] "Microsite"       "mn.gr.abun:Size" "ndvi"           

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb673"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb673-1"><a href="#cb673-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.9</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  Microsite <span class="sc">+</span> mn.gr.abun<span class="sc">:</span>Size <span class="sc">+</span> arid <span class="sc">+</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb673-2"><a href="#cb673-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m11<span class="fl">.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
            R2m       R2c
[1,] 0.09339005 0.2850194

$hierarchical.partitioning
                 Unique Average.share Individual I.perc(%)
Microsite        0.0006       -0.0001     0.0005      0.54
mn.gr.abun:Size  0.0329       -0.0052     0.0277     29.66
arid            -0.1188        0.0677    -0.0511    -54.71
ndvi             0.0595        0.0568     0.1163    124.52

$variables
[1] "Microsite"       "mn.gr.abun:Size" "arid"            "ndvi"           

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb675"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb675-1"><a href="#cb675-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m11<span class="fl">.7</span>, m11<span class="fl">.8</span>, m11<span class="fl">.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      df      AIC
m11.7  8 5939.436
m11.8  8 5918.252
m11.9  9 5916.348</code></pre>
</div>
<div class="sourceCode cell-code" id="cb677"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb677-1"><a href="#cb677-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(m11<span class="fl">.7</span>, m11<span class="fl">.8</span>, m11<span class="fl">.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      df      BIC
m11.7  8 5974.518
m11.8  8 5953.333
m11.9  9 5955.815</code></pre>
</div>
<div class="sourceCode cell-code" id="cb679"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb679-1"><a href="#cb679-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          
percent ~ Microsite + mn.gr.abun:Size + arid + ndvi + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5916.3   5955.8  -2949.2   5898.3      584 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept)  315.9   17.77   
 Residual             1178.7   34.33   
Number of obs: 593, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.18e+03 

Conditional model:
                      Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)          54.344824  11.511441   4.721 2.35e-06 ***
Micrositeshrub       -1.622044   2.825394  -0.574 0.565904    
arid                  2.556661   1.226503   2.085 0.037114 *  
ndvi                 -0.017472   0.003466  -5.041 4.62e-07 ***
mn.gr.abun:Sizelarge  4.984393   1.916659   2.601 0.009307 ** 
mn.gr.abun:Sizemed    7.175519   2.052901   3.495 0.000474 ***
mn.gr.abun:Sizesmall  6.348979   1.929251   3.291 0.000999 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb681"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb681-1"><a href="#cb681-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m11<span class="fl">.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: percent
                  Chisq Df Pr(&gt;Chisq)    
Microsite        0.3296  1  0.5659037    
arid             4.3452  1  0.0371136 *  
ndvi            25.4146  1  4.624e-07 ***
mn.gr.abun:Size 18.8703  3  0.0002908 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb683"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb683-1"><a href="#cb683-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m11<span class="fl">.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
            R2m       R2c
[1,] 0.09339005 0.2850194

$hierarchical.partitioning
                 Unique Average.share Individual I.perc(%)
Microsite        0.0006       -0.0001     0.0005      0.54
mn.gr.abun:Size  0.0329       -0.0052     0.0277     29.66
arid            -0.1188        0.0677    -0.0511    -54.71
ndvi             0.0595        0.0568     0.1163    124.52

$variables
[1] "Microsite"       "mn.gr.abun:Size" "arid"            "ndvi"           

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb685"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb685-1"><a href="#cb685-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.8</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>  Microsite <span class="sc">+</span> mn.gr.abun<span class="sc">*</span>Size <span class="sc">+</span> ndvi <span class="sc">+</span>(<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb685-2"><a href="#cb685-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          percent ~ Microsite + mn.gr.abun * Size + ndvi + (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5903.1   5946.9  -2941.5   5883.1      583 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept)  462.6   21.51   
 Residual             1143.4   33.81   
Number of obs: 593, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.14e+03 

Conditional model:
                      Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)          58.360622  12.303961   4.743 2.10e-06 ***
Micrositeshrub       -1.739437   2.783102  -0.625   0.5320    
mn.gr.abun            9.336897   2.211607   4.222 2.42e-05 ***
Sizemed              10.027674   4.554164   2.202   0.0277 *  
Sizesmall            20.141091   4.564494   4.413 1.02e-05 ***
ndvi                 -0.014549   0.003392  -4.289 1.80e-05 ***
mn.gr.abun:Sizemed   -2.174547   3.103977  -0.701   0.4836    
mn.gr.abun:Sizesmall -7.272727   2.969092  -2.449   0.0143 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb687"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb687-1"><a href="#cb687-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(m11<span class="fl">.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II Wald chisquare tests)

Response: percent
                  Chisq Df Pr(&gt;Chisq)    
Microsite        0.3906  1  0.5319716    
mn.gr.abun      18.6157  1  1.599e-05 ***
Size            14.1526  2  0.0008449 ***
ndvi            18.3934  1  1.797e-05 ***
mn.gr.abun:Size  6.2710  2  0.0434791 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb689"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb689-1"><a href="#cb689-1" aria-hidden="true" tabindex="-1"></a>mseeds <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>Microsite <span class="sc">+</span> mn.gr.abun<span class="sc">:</span>Size <span class="sc">+</span> ndvi  <span class="sc">+</span> arid <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb689-2"><a href="#cb689-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(mseeds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
            R2m       R2c
[1,] 0.09339004 0.2850194

$hierarchical.partitioning
                 Unique Average.share Individual I.perc(%)
Microsite        0.0006       -0.0001     0.0005      0.54
mn.gr.abun:Size  0.0329       -0.0052     0.0277     29.66
ndvi             0.0595        0.0568     0.1163    124.52
arid            -0.1188        0.0677    -0.0511    -54.71

$variables
[1] "Microsite"       "mn.gr.abun:Size" "ndvi"            "arid"           

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb691"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb691-1"><a href="#cb691-1" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">glmm.hp</span>(mseeds, <span class="at">commonality =</span> <span class="cn">TRUE</span>)</span>
<span id="cb691-2"><a href="#cb691-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb692"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb692-1"><a href="#cb692-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>Microsite <span class="sc">+</span> mn.gr.abun<span class="sc">*</span>Size <span class="sc">+</span> ndvi  <span class="sc">+</span> gr.webers <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb692-2"><a href="#cb692-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m11<span class="fl">.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Family: gaussian  ( identity )
Formula:          percent ~ Microsite + mn.gr.abun * Size + ndvi + gr.webers +  
    (1 | Site)
Data: seeds

     AIC      BIC   logLik deviance df.resid 
  5793.7   5841.7  -2885.8   5771.7      571 

Random effects:

Conditional model:
 Groups   Name        Variance Std.Dev.
 Site     (Intercept)  476.8   21.84   
 Residual             1137.8   33.73   
Number of obs: 582, groups:  Site, 7

Dispersion estimate for gaussian family (sigma^2): 1.14e+03 

Conditional model:
                      Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)          44.340351  19.158036   2.314  0.02064 *  
Micrositeshrub       -1.278338   2.803409  -0.456  0.64839    
mn.gr.abun            8.188801   2.337657   3.503  0.00046 ***
Sizemed               8.929615   4.616704   1.934  0.05309 .  
Sizesmall            18.744112   4.639385   4.040 5.34e-05 ***
ndvi                 -0.014442   0.003538  -4.082 4.47e-05 ***
gr.webers            12.801958  12.596040   1.016  0.30946    
mn.gr.abun:Sizemed   -1.711329   3.118946  -0.549  0.58322    
mn.gr.abun:Sizesmall -6.673657   2.986515  -2.235  0.02544 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb694"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb694-1"><a href="#cb694-1" aria-hidden="true" tabindex="-1"></a>m11<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(percent <span class="sc">~</span>Microsite <span class="sc">+</span> mn.gr.abun<span class="sc">:</span>Size <span class="sc">+</span> arid  <span class="sc">+</span> gr.webers <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Site), seeds)</span>
<span id="cb694-2"><a href="#cb694-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glmm.hp</span>(m11<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$r.squaredGLMM
            R2m       R2c
[1,] 0.05091296 0.1675628

$hierarchical.partitioning
                 Unique Average.share Individual I.perc(%)
Microsite        0.0000        0.0002     0.0002      0.39
mn.gr.abun:Size -0.0106        0.0128     0.0022      4.31
arid             0.0064        0.0013     0.0077     15.10
gr.webers        0.0170        0.0239     0.0409     80.20

$variables
[1] "Microsite"       "mn.gr.abun:Size" "arid"            "gr.webers"      

$type
[1] "hierarchical.partitioning"

attr(,"class")
[1] "glmmhp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb696"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb696-1"><a href="#cb696-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(m11<span class="fl">.1</span>, m11<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      df      AIC
m11.1 11 5793.699
m11.2  9 5825.594</code></pre>
</div>
<div class="sourceCode cell-code" id="cb698"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb698-1"><a href="#cb698-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(m11<span class="fl">.1</span>, m11<span class="fl">.2</span>, m11<span class="fl">.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in BIC.default(m11.1, m11.2, m11.9): models are not all fitted to the
same number of observations</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      df      BIC
m11.1 11 5841.730
m11.2  9 5864.892
m11.9  9 5955.815</code></pre>
</div>
<div class="sourceCode cell-code" id="cb701"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb701-1"><a href="#cb701-1" aria-hidden="true" tabindex="-1"></a>em <span class="ot">&lt;-</span><span class="fu">emtrends</span>(m11<span class="fl">.9</span>, <span class="sc">~</span><span class="st">"Size"</span>, <span class="at">var=</span> <span class="st">"mn.gr.abun"</span>)</span>
<span id="cb701-2"><a href="#cb701-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb701-3"><a href="#cb701-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb701-4"><a href="#cb701-4" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contrast      estimate   SE  df t.ratio p.value
 large - med     -2.191 2.34 584  -0.936  0.6177
 large - small   -1.365 2.26 584  -0.605  0.8177
 med - small      0.827 2.35 584   0.351  0.9344

Results are averaged over the levels of: Microsite 
P value adjustment: tukey method for comparing a family of 3 estimates </code></pre>
</div>
<div class="sourceCode cell-code" id="cb703"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb703-1"><a href="#cb703-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Size  mn.gr.abun.trend   SE  df lower.CL upper.CL
 large             4.98 1.92 584     1.22     8.75
 med               7.18 2.05 584     3.14    11.21
 small             6.35 1.93 584     2.56    10.14

Results are averaged over the levels of: Microsite 
Confidence level used: 0.95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb705"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb705-1"><a href="#cb705-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Size  mn.gr.abun.trend   SE  df t.ratio p.value
 large             4.98 1.92 584   2.601  0.0095
 med               7.18 2.05 584   3.495  0.0005
 small             6.35 1.93 584   3.291  0.0011

Results are averaged over the levels of: Microsite </code></pre>
</div>
<div class="sourceCode cell-code" id="cb707"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb707-1"><a href="#cb707-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(em)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb708"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb708-1"><a href="#cb708-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(mn.gr.abun, percent, <span class="at">fill =</span> Size)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb710"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb710-1"><a href="#cb710-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(ndvi, percent)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb712"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb712-1"><a href="#cb712-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(arid, percent, <span class="at">fill =</span> Size)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb714"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb714-1"><a href="#cb714-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(mn.abun.ants, gr.webers)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 11 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb717"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb717-1"><a href="#cb717-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(mn.abun.ants, percent)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb719"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb719-1"><a href="#cb719-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(mn.gr.abun, percent)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb721"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb721-1"><a href="#cb721-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(gr.webers, percent)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 11 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb724"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb724-1"><a href="#cb724-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(arid, percent)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb726"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb726-1"><a href="#cb726-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(ndvi, percent)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb728"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb728-1"><a href="#cb728-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(arid, mn.abun.ants)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-24-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="seed-removal-figures" class="level1">
<h1>Seed Removal Figures</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb730"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb730-1"><a href="#cb730-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'gridExtra'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    combine</code></pre>
</div>
<div class="sourceCode cell-code" id="cb733"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb733-1"><a href="#cb733-1" aria-hidden="true" tabindex="-1"></a>seeds<span class="sc">$</span>Size <span class="ot">&lt;-</span> <span class="fu">factor</span>(seeds<span class="sc">$</span>Size, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"small"</span>, <span class="st">"med"</span>, <span class="st">"large"</span>))</span>
<span id="cb733-2"><a href="#cb733-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb733-3"><a href="#cb733-3" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span><span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(mn.abun.ants, percent))<span class="sc">+</span> <span class="fu">stat_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(seeds, Size <span class="sc">==</span> <span class="st">"small"</span>), <span class="fu">aes</span>(<span class="at">color =</span> Size), <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span>  <span class="fu">stat_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(seeds, Size <span class="sc">==</span> <span class="st">"med"</span>), <span class="fu">aes</span>(<span class="at">color =</span> Size),<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span>  <span class="fu">stat_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(seeds, Size <span class="sc">==</span> <span class="st">"large"</span>), <span class="fu">aes</span>(<span class="at">color =</span> Size),<span class="at">method =</span> <span class="st">"lm"</span>)   <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>))<span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Mean ant abundance"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Seeds removed (%)"</span>) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">position =</span> <span class="st">"jitter"</span>) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Bait Size"</span>, <span class="at">position =</span> <span class="st">"top"</span>))</span>
<span id="cb733-4"><a href="#cb733-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb733-5"><a href="#cb733-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb733-6"><a href="#cb733-6" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb736"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb736-1"><a href="#cb736-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(seeds, <span class="fu">aes</span>(ndvi, percent)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Productivity (NDVI)"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Seeds removed (%)"</span>) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">position =</span> <span class="st">"jitter"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>))</span>
<span id="cb736-2"><a href="#cb736-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb736-3"><a href="#cb736-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb736-4"><a href="#cb736-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb736-5"><a href="#cb736-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb736-6"><a href="#cb736-6" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">list</span>(a,b)</span>
<span id="cb736-7"><a href="#cb736-7" aria-hidden="true" tabindex="-1"></a>grobs <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb736-8"><a href="#cb736-8" aria-hidden="true" tabindex="-1"></a>widths <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb736-9"><a href="#cb736-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb736-10"><a href="#cb736-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(plots)){</span>
<span id="cb736-11"><a href="#cb736-11" aria-hidden="true" tabindex="-1"></a>    grobs[[i]] <span class="ot">&lt;-</span> <span class="fu">ggplotGrob</span>(plots[[i]])</span>
<span id="cb736-12"><a href="#cb736-12" aria-hidden="true" tabindex="-1"></a>    widths[[i]] <span class="ot">&lt;-</span> grobs[[i]]<span class="sc">$</span>widths[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb736-13"><a href="#cb736-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb738"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb738-1"><a href="#cb738-1" aria-hidden="true" tabindex="-1"></a>maxwidth <span class="ot">&lt;-</span> <span class="fu">do.call</span>(grid<span class="sc">::</span>unit.pmax, widths)</span>
<span id="cb738-2"><a href="#cb738-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grobs)){</span>
<span id="cb738-3"><a href="#cb738-3" aria-hidden="true" tabindex="-1"></a>     grobs[[i]]<span class="sc">$</span>widths[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">as.list</span>(maxwidth)</span>
<span id="cb738-4"><a href="#cb738-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb738-5"><a href="#cb738-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb738-6"><a href="#cb738-6" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">"grid.arrange"</span>, <span class="fu">c</span>(grobs, <span class="at">ncol =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb739"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb739-1"><a href="#cb739-1" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TableGrob (2 x 1) "arrange": 2 grobs
  z     cells    name           grob
1 1 (1-1,1-1) arrange gtable[layout]
2 2 (2-2,1-1) arrange gtable[layout]</code></pre>
</div>
</div>
</section>
<section id="ant-size-figure" class="level1">
<h1>Ant Size Figure</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb741"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb741-1"><a href="#cb741-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(Microsite, gr.webers)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Microsite"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Ant body size (mm)"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">"mean"</span>, <span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">shape =</span> <span class="dv">23</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb741-2"><a href="#cb741-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb741-3"><a href="#cb741-3" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(arid, gr.webers)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)  <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"DeMartonne's Aridity Index"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Ant body size (mm)"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb741-4"><a href="#cb741-4" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 356 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 356 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb745"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb745-1"><a href="#cb745-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plot</span>(<span class="fu">glmm.hp</span>(m7), <span class="at">plot.perc =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="sourceCode cell-code" id="cb752"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb752-1"><a href="#cb752-1" aria-hidden="true" tabindex="-1"></a>mod3 <span class="ot">&lt;-</span> m7</span>
<span id="cb752-2"><a href="#cb752-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">glmm.hp</span>(mod3,<span class="at">type=</span><span class="st">"R2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-26-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb758"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb758-1"><a href="#cb758-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">glmm.hp</span>(mod3,<span class="at">commonality=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; extreme or very small
eigenvalues detected. See vignette('troubleshooting')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')

Warning in fitTMB(TMBStruc): Model convergence problem; non-positive-definite
Hessian matrix. See vignette('troubleshooting')</code></pre>
</div>
<div class="sourceCode cell-code" id="cb764"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb764-1"><a href="#cb764-1" aria-hidden="true" tabindex="-1"></a>p[[<span class="st">"variables"</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CWM Seed Size"</span>, <span class="st">"Aridity"</span>, <span class="st">"Microsite"</span>)</span>
<span id="cb764-2"><a href="#cb764-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p, <span class="at">dig =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-26-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb765"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb765-1"><a href="#cb765-1" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(Microsite.x, nat.cwm)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Microsite"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Native Seed size"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">"mean"</span>, <span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">shape =</span> <span class="dv">23</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb765-2"><a href="#cb765-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb765-3"><a href="#cb765-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb765-4"><a href="#cb765-4" aria-hidden="true" tabindex="-1"></a>c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_summary()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-26-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb768"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb768-1"><a href="#cb768-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, nat.cwm)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)  <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"DeMartonne's Aridity Index"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Native Seed Size"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb768-2"><a href="#cb768-2" aria-hidden="true" tabindex="-1"></a>d</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-26-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb772"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb772-1"><a href="#cb772-1" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(Microsite.x, cwm.inv)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Microsite"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Invasive Seed size"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">"mean"</span>, <span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">shape =</span> <span class="dv">23</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb772-2"><a href="#cb772-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb772-3"><a href="#cb772-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, cwm.inv)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)  <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"DeMartonne's Aridity Index"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Invasive Seed Size"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb772-4"><a href="#cb772-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb772-5"><a href="#cb772-5" aria-hidden="true" tabindex="-1"></a>f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-26-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb776"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb776-1"><a href="#cb776-1" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">list</span>(a,c, e, b, d, f)</span>
<span id="cb776-2"><a href="#cb776-2" aria-hidden="true" tabindex="-1"></a>grobs <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb776-3"><a href="#cb776-3" aria-hidden="true" tabindex="-1"></a>widths <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb776-4"><a href="#cb776-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb776-5"><a href="#cb776-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(plots)){</span>
<span id="cb776-6"><a href="#cb776-6" aria-hidden="true" tabindex="-1"></a>    grobs[[i]] <span class="ot">&lt;-</span> <span class="fu">ggplotGrob</span>(plots[[i]])</span>
<span id="cb776-7"><a href="#cb776-7" aria-hidden="true" tabindex="-1"></a>    widths[[i]] <span class="ot">&lt;-</span> grobs[[i]]<span class="sc">$</span>widths[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb776-8"><a href="#cb776-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 356 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 356 rows containing non-finite outside the scale range
(`stat_summary()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_summary()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing non-finite outside the scale range
(`stat_summary()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 356 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 356 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 286 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 208 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb792"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb792-1"><a href="#cb792-1" aria-hidden="true" tabindex="-1"></a>maxwidth <span class="ot">&lt;-</span> <span class="fu">do.call</span>(grid<span class="sc">::</span>unit.pmax, widths)</span>
<span id="cb792-2"><a href="#cb792-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grobs)){</span>
<span id="cb792-3"><a href="#cb792-3" aria-hidden="true" tabindex="-1"></a>     grobs[[i]]<span class="sc">$</span>widths[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">as.list</span>(maxwidth)</span>
<span id="cb792-4"><a href="#cb792-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb792-5"><a href="#cb792-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb792-6"><a href="#cb792-6" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">"grid.arrange"</span>, <span class="fu">c</span>(grobs, <span class="at">ncol =</span> <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-26-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb793"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb793-1"><a href="#cb793-1" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TableGrob (2 x 3) "arrange": 6 grobs
  z     cells    name           grob
1 1 (1-1,1-1) arrange gtable[layout]
2 2 (1-1,2-2) arrange gtable[layout]
3 3 (1-1,3-3) arrange gtable[layout]
4 4 (2-2,1-1) arrange gtable[layout]
5 5 (2-2,2-2) arrange gtable[layout]
6 6 (2-2,3-3) arrange gtable[layout]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb795"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb795-1"><a href="#cb795-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(cwm.site, gr.webers)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 356 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 356 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-26-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="abundance-and-richness-figures" class="level1">
<h1>Abundance and richness figures</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb799"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb799-1"><a href="#cb799-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shrub needs to be a dashed line with no SE</span></span>
<span id="cb799-2"><a href="#cb799-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb799-3"><a href="#cb799-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, abun, <span class="at">color =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">stat_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(plt.ag, Microsite.x <span class="sc">==</span> <span class="st">"open"</span>), <span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">stat_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(plt.ag,, Microsite.x <span class="sc">==</span> <span class="st">"shrub"</span>), <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)<span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"DeMartonne's Aridity Index"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Annual Abundance </span><span class="sc">\n</span><span class="st"> per quadrat"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Microsite"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>( <span class="st">"#DF7861"</span>, <span class="st">"#94B49F"</span>)) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Microsite"</span>, <span class="at">position =</span> <span class="st">"top"</span>))</span>
<span id="cb799-4"><a href="#cb799-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb799-5"><a href="#cb799-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb799-6"><a href="#cb799-6" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb801"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb801-1"><a href="#cb801-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(arid, rich, <span class="at">color =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"DeMartonne's Aridity Index"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Annual Species Richness </span><span class="sc">\n</span><span class="st"> per quadrat"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Microsite"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#DF7861"</span>, <span class="st">"#94B49F"</span>)) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Microsite"</span>, <span class="at">position =</span> <span class="st">"top"</span>))</span>
<span id="cb801-2"><a href="#cb801-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb801-3"><a href="#cb801-3" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb803"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb803-1"><a href="#cb803-1" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(pts, gr.abun <span class="sc">&lt;</span> <span class="dv">75</span>), <span class="fu">aes</span>(ndvi, gr.abun)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Productivity (NDVI)"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Granivorous ant </span><span class="sc">\n</span><span class="st"> abundance per pitfall"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb803-2"><a href="#cb803-2" aria-hidden="true" tabindex="-1"></a>c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb805"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb805-1"><a href="#cb805-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(ndvi, gr.richness)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Productivity (NDVI)"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Granivorous ant </span><span class="sc">\n</span><span class="st"> richness per pitfall"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb805-2"><a href="#cb805-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb805-3"><a href="#cb805-3" aria-hidden="true" tabindex="-1"></a>d</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb807"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb807-1"><a href="#cb807-1" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">list</span>(a,c, b, d)</span>
<span id="cb807-2"><a href="#cb807-2" aria-hidden="true" tabindex="-1"></a>grobs <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb807-3"><a href="#cb807-3" aria-hidden="true" tabindex="-1"></a>widths <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb807-4"><a href="#cb807-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb807-5"><a href="#cb807-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(plots)){</span>
<span id="cb807-6"><a href="#cb807-6" aria-hidden="true" tabindex="-1"></a>    grobs[[i]] <span class="ot">&lt;-</span> <span class="fu">ggplotGrob</span>(plots[[i]])</span>
<span id="cb807-7"><a href="#cb807-7" aria-hidden="true" tabindex="-1"></a>    widths[[i]] <span class="ot">&lt;-</span> grobs[[i]]<span class="sc">$</span>widths[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb807-8"><a href="#cb807-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb809"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb809-1"><a href="#cb809-1" aria-hidden="true" tabindex="-1"></a>maxwidth <span class="ot">&lt;-</span> <span class="fu">do.call</span>(grid<span class="sc">::</span>unit.pmax, widths)</span>
<span id="cb809-2"><a href="#cb809-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grobs)){</span>
<span id="cb809-3"><a href="#cb809-3" aria-hidden="true" tabindex="-1"></a>     grobs[[i]]<span class="sc">$</span>widths[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">as.list</span>(maxwidth)</span>
<span id="cb809-4"><a href="#cb809-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb809-5"><a href="#cb809-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb809-6"><a href="#cb809-6" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">"grid.arrange"</span>, <span class="fu">c</span>(grobs, <span class="at">ncol =</span> <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb810"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb810-1"><a href="#cb810-1" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TableGrob (2 x 2) "arrange": 4 grobs
  z     cells    name           grob
1 1 (1-1,1-1) arrange gtable[layout]
2 2 (1-1,2-2) arrange gtable[layout]
3 3 (2-2,1-1) arrange gtable[layout]
4 4 (2-2,2-2) arrange gtable[layout]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb812"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb812-1"><a href="#cb812-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ndvi for supplemental information</span></span>
<span id="cb812-2"><a href="#cb812-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb812-3"><a href="#cb812-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plt.ag, <span class="fu">aes</span>(ndvi, abun, <span class="at">fill =</span> Microsite.x)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Productivity (NDVI)"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Annual Abundance </span><span class="sc">\n</span><span class="st"> per quadrat"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Microsite"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb814"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb814-1"><a href="#cb814-1" aria-hidden="true" tabindex="-1"></a><span class="co">#arid for the ants</span></span>
<span id="cb814-2"><a href="#cb814-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb814-3"><a href="#cb814-3" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(pts, gr.abun <span class="sc">&lt;</span> <span class="dv">75</span>), <span class="fu">aes</span>(ndvi, gr.abun)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"DeMartonne's Aridity Index"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Granivorous ant </span><span class="sc">\n</span><span class="st"> abundance per pitfall"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb814-4"><a href="#cb814-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb814-5"><a href="#cb814-5" aria-hidden="true" tabindex="-1"></a>e</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb816"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb816-1"><a href="#cb816-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pts, <span class="fu">aes</span>(arid, gr.richness)) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"DeMartonne's Aridity Index"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Granivorous ant </span><span class="sc">\n</span><span class="st"> richness per pitfall"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), , <span class="at">panel.background =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb816-2"><a href="#cb816-2" aria-hidden="true" tabindex="-1"></a>f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb818"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb818-1"><a href="#cb818-1" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">list</span>(e,f)</span>
<span id="cb818-2"><a href="#cb818-2" aria-hidden="true" tabindex="-1"></a>grobs <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb818-3"><a href="#cb818-3" aria-hidden="true" tabindex="-1"></a>widths <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb818-4"><a href="#cb818-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb818-5"><a href="#cb818-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(plots)){</span>
<span id="cb818-6"><a href="#cb818-6" aria-hidden="true" tabindex="-1"></a>    grobs[[i]] <span class="ot">&lt;-</span> <span class="fu">ggplotGrob</span>(plots[[i]])</span>
<span id="cb818-7"><a href="#cb818-7" aria-hidden="true" tabindex="-1"></a>    widths[[i]] <span class="ot">&lt;-</span> grobs[[i]]<span class="sc">$</span>widths[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb818-8"><a href="#cb818-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb820"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb820-1"><a href="#cb820-1" aria-hidden="true" tabindex="-1"></a>maxwidth <span class="ot">&lt;-</span> <span class="fu">do.call</span>(grid<span class="sc">::</span>unit.pmax, widths)</span>
<span id="cb820-2"><a href="#cb820-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grobs)){</span>
<span id="cb820-3"><a href="#cb820-3" aria-hidden="true" tabindex="-1"></a>     grobs[[i]]<span class="sc">$</span>widths[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">as.list</span>(maxwidth)</span>
<span id="cb820-4"><a href="#cb820-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb820-5"><a href="#cb820-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb820-6"><a href="#cb820-6" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">"grid.arrange"</span>, <span class="fu">c</span>(grobs, <span class="at">ncol =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb821"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb821-1"><a href="#cb821-1" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TableGrob (2 x 1) "arrange": 2 grobs
  z     cells    name           grob
1 1 (1-1,1-1) arrange gtable[layout]
2 2 (2-2,1-1) arrange gtable[layout]</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>